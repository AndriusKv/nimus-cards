(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{100:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},111:function(e,t,a){"use strict";var n=a(0),c=a.n(n),l=(a(107),a(56),a(104),a(108),a(11));var r=function({id:e,attachementId:t,side:a}){const[r,i]=Object(n.useState)(null),[s,o]=Object(n.useState)(!1),d=Object(n.useRef)(null),m=Object(n.useRef)(null);function u(){d.current.currentTime=0,d.current.play()}function p(){m.current.currentTime=0,m.current.play()}function E(){o(!s)}return Object(n.useEffect)(()=>{let e="",n="";if(a.attachment){const{blob:c,url:l,type:r}=a.attachment;n=c?"blob":"url",e=c?URL.createObjectURL(c):l,i({src:e,attachementId:t,mediaType:r})}else i(null);return()=>{"blob"===n&&URL.revokeObjectURL(e)}},[e,t]),c.a.createElement(c.a.Fragment,null,r&&function(){const{mediaType:e,src:t,attachementId:a}=r;return"image"===e?c.a.createElement("button",{className:"btn btn-icon study-image-btn",onClick:E},c.a.createElement("img",{src:t,alt:"",className:"study-image"})):"audio"===e?c.a.createElement("button",{className:"btn study-audio-btn",onClick:u},c.a.createElement(l.a,{name:"volume"}),c.a.createElement("audio",{src:t,ref:d,key:a,autoPlay:!0})):"video"===e?c.a.createElement("button",{className:"btn btn-icon study-video-btn",onClick:p},c.a.createElement("video",{src:t,className:"study-video",crossOrigin:"anonymous",ref:m,key:a,autoPlay:!0})):null}(),a.text&&c.a.createElement("div",{className:"study-front-text",style:{fontSize:a.textSize+"px"}},a.text),s&&c.a.createElement("div",{className:"study-expaned-image-mask",onClick:function(){o(!1)}},c.a.createElement("img",{src:r.src,className:"study-expaned-image",alt:""})))},i=(a(109),a(30));var s=function({card:e,selectOption:t,handleSubmit:a}){const{back:n,revealed:r}=e,{type:s,typeOptions:o}=n;return"text"===s?c.a.createElement("div",{className:"study-card-text-content",style:{fontSize:o.textSize+"px"}},o.value):"exact"===s?function(){let t="input study-exact-input";return r&&(t+=e.isCorrect?" right":" wrong"),c.a.createElement("form",{onSubmit:a,className:"study-exact"},c.a.createElement("label",null,c.a.createElement("div",{className:"study-exact-top"},c.a.createElement("div",{className:"study-exact-title"},"Your Answer:"),n.typeOptions.caseSensitive?c.a.createElement("div",{className:"study-exact-notice"},c.a.createElement(l.a,{name:"info",className:"study-exact-notice-icon"}),c.a.createElement("span",null,"Answer is case sensitive")):""),c.a.createElement("input",{type:"input",className:t,name:"answer",disabled:r})),c.a.createElement("button",{className:"btn study-exact-btn",disabled:r},"Check Answer"))}():"multi"===s?c.a.createElement("ul",{className:Object(i.a)("study-multi",`study-multi-${n.typeOptions.layout}-type`,r?"revealed":"")},o.options.map(({id:e,value:a},l)=>c.a.createElement("li",{key:l},c.a.createElement("button",{onClick:()=>t(e),className:Object(i.a)("btn study-multi-item",`study-multi-${n.typeOptions.layout}-type-item`,r&&o.correctId===e?"correct":"")},a)))):null};t.a=function({card:e,selectOption:t,revealAnswer:a,nextStep:n,skipNextStepTimeout:l}){return"text"!==e.back.type||e.revealed?c.a.createElement("div",{className:"study-card study-card-"+e.back.type},c.a.createElement(r,{id:e.id,attachementId:e.attachementId,side:e.front}),c.a.createElement(s,{card:e,selectOption:t,handleSubmit:function(t){if(t.preventDefault(),e.revealed)return;const a=t.target.elements.answer.value;let c=!1;c=e.back.typeOptions.caseSensitive?a===e.back.typeOptions.value:a.toLowerCase()===e.back.typeOptions.value.toLowerCase(),n(c)}}),"text"===e.back.type&&e.revealed&&!e.timerReveal&&c.a.createElement("div",{className:"study-card-text-btns"},e.finished?c.a.createElement("button",{className:"btn study-card-text-btn",onClick:l},"Next"):c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:"btn btn-danger study-card-text-btn",disabled:e.finished,onClick:()=>n(!1)},"I Was Wrong"),c.a.createElement("button",{className:"btn btn-success study-card-text-btn",disabled:e.finished,onClick:()=>n(!0)},"I Got It Right")))):c.a.createElement("div",{className:"study-card study-card-text"},c.a.createElement(r,{id:e.id,attachementId:e.attachementId,side:e.front}),c.a.createElement("button",{className:"btn study-card-text-btn study-card-text-reveal-btn",onClick:a},"Check"))}},121:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},136:function(e,t,a){},156:function(e,t,a){"use strict";a.r(t);a(56);var n=a(0),c=a.n(n),l=(a(121),a(103)),r=a.n(l),i=a(30);const s=Object(n.createContext)(null);function o({children:e}){const[t,a]=Object(n.useReducer)(m,null),l=Object(n.useMemo)(()=>({state:t,dispatch:a}),[t]);return c.a.createElement(s.Provider,{value:l},e)}function d(){return Object(n.useContext)(s)}function m(e,t){switch(t.type){case"RESET_DECK":return{...t.deck};case"UPDATE_DECK":return{...e,[t.name]:t.value};case"ADD_CARD":return{...e,cards:[...e.cards,t.card]};case"PREVIEW_CARD":return{...e,cards:[...e.cards]};case"HIDE_PREVIEW_CARD":return delete t.card.visible,delete t.card.back.typeOptions,{...e,cards:[...e.cards]};case"SELECT_CARD":return e.selectedCardIndex=t.index,{...e};case"INSERT_CARD":return e.selectedCardIndex=t.index,e.cards.splice(t.index,0,t.card),{...e,cards:[...e.cards]};case"SWAP_CARD":return[e.cards[t.index],e.cards[t.targetIndex]]=[e.cards[t.targetIndex],e.cards[t.index]],{...e,cards:[...e.cards]};case"REMOVE_CARD":return e.cards.splice(t.index,1),{...e};case"UPDATE_CARD_VALUE":return e.cards[t.index].modified="front"===t.name,e.cards[t.index][t.name][t.key]=t.value,{...e};case"ADD_ATTACHMENT":return e.cards[t.index].modified=!0,e.cards[t.index].front.attachment=t.attachment,{...e};case"REMOVE_ATTACHMENT":return e.cards[t.index].modified=!0,delete e.cards[t.index].front.attachment,{...e};case"UPDATE_ATTACHMENT_DESCRIPTION":return e.cards[t.index].modified=!0,e.cards[t.index].front.attachment.description=t.description,{...e};case"UPDATE_CARD_BACK":const a=e.cards[t.index];return a.modified=!0,a.back={...a.back,...t.payload},{...e};default:return e}}var u=a(98),p=a(11);a(122);function E({textSize:e,handleChange:t}){return c.a.createElement("select",{className:"input create-side-select",title:"Text size",defaultValue:e,onChange:t},c.a.createElement("option",{value:"16"},"16px"),c.a.createElement("option",{value:"24"},"24px"),c.a.createElement("option",{value:"36"},"36px"),c.a.createElement("option",{value:"48"},"48px"))}a(123);var b=function({addAttachment:e}){const[t,a]=Object(n.useState)(""),[l,r]=Object(n.useState)("image");function i(e){a(e),setTimeout(()=>{a("")},3200)}return c.a.createElement("div",{className:"upload-panel"},c.a.createElement("div",{className:"upload-type-selection"},["image","audio","video"].map((e,t)=>c.a.createElement("button",{className:"btn btn-icon upload-type-selection-btn"+(l===e?" active":""),onClick:()=>r(e),key:t},c.a.createElement(p.a,{name:e+"-file"}),c.a.createElement("span",null,e)))),l&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"upload-panel-device-target"},c.a.createElement("div",{className:"upload-panel-device-target-title"},"Select ",l," file from device"),c.a.createElement("label",{className:"btn upload-panel-import-input-container"},c.a.createElement("span",null,"Select File"),c.a.createElement("input",{type:"file",className:"sr-only",onChange:function({target:t}){const[a]=t.files;t.value="",a.type.split("/")[0]!==l?i("File is not an "+l):e({blob:a,type:l})}}))),c.a.createElement("div",{className:"upload-panel-item-separator"},"Or"),c.a.createElement("div",{className:"upload-panel-url-target"},c.a.createElement("div",{className:"upload-panel-url-target-title"},"Upload ",l," file from URL"),c.a.createElement("form",{onSubmit:function(t){const a=t.target.elements.url.value.trim();if(t.preventDefault(),a){if("image"===l){const t=new Image;t.onload=()=>{e({url:a,type:l})},t.onerror=e=>{i(`URL doesn't contain ${l} file`),console.log(e)},t.src=a}else if("audio"===l){const t=new Audio(a);t.onloadedmetadata=()=>{e({url:a,type:l})},t.onerror=e=>{i(`URL doesn't contain ${l} file`),console.log(e)}}else if("video"===l){const t=document.createElement("video");t.crossOrigin="anonymous",t.onloadedmetadata=()=>{e({url:a,type:l})},t.onerror=e=>{i(`URL doesn't contain ${l} file`),console.log(e)},t.src=a}}else i("Please specify valid url")},className:"upload-panel-form"},c.a.createElement("input",{type:"text",name:"url",className:"input upload-panel-url-target-input"}),c.a.createElement("button",{className:"btn"},"Upload"))),c.a.createElement("div",{className:"upload-panel-footer"},t&&c.a.createElement("div",{className:"upload-panel-message"},t))))};a(104);function f({blob:e,url:t,type:a}){const n=e?URL.createObjectURL(e):t;return"image"===a?c.a.createElement("img",{src:n,alt:"",className:"create-side-image"}):"audio"===a?c.a.createElement("audio",{src:n,className:"create-side-audio",controls:!0}):"video"===a?c.a.createElement("video",{src:n,className:"create-side-video",crossOrigin:"anonymous",controls:!0}):null}var y=function({index:e,side:t,handleChange:a}){const{dispatch:l}=d(),[r,i]=Object(n.useState)("text"),{text:s,textSize:o,attachment:m}=t;function u(){l({type:"REMOVE_ATTACHMENT",index:e})}function y({target:e}){i(e.value)}return c.a.createElement("div",{className:"create-card-side"},c.a.createElement("div",{className:"create-side-toolbar"},c.a.createElement("ul",{className:"create-side-types"},c.a.createElement("li",{className:"create-side-type"},c.a.createElement("label",null,c.a.createElement("input",{type:"radio",className:"sr-only create-type-radio",value:"text",checked:"text"===r,onChange:y}),c.a.createElement(p.a,{name:"text",title:"Text",className:"create-option-type-icon"}))),c.a.createElement("li",{className:"create-side-type"},c.a.createElement("label",null,c.a.createElement("input",{type:"radio",className:"sr-only create-type-radio",value:"attachment",checked:"attachment"===r,onChange:y}),c.a.createElement(p.a,{name:"attachment",title:"Attachment",className:"create-option-type-icon"})))),"text"===r&&c.a.createElement(E,{textSize:o,handleChange:e=>a(e,"front","textSize")})),"text"===r?c.a.createElement("div",{className:"create-side-content ab"},c.a.createElement("textarea",{className:"input create-side-text-input",value:s,style:{fontSize:o+"px"},onChange:e=>a(e,"front","text")})):c.a.createElement("div",{className:"create-side-content ab"},m?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"create-side-panel"},c.a.createElement("button",{type:"button",className:"btn btn-icon create-side-panel-btn",onClick:u,title:"Remove attachment"},c.a.createElement(p.a,{name:"remove"})),c.a.createElement(f,m)),c.a.createElement("input",{type:"text",className:"input create-side-attachment-input",placeholder:"Describe attachment",defaultValue:m.description,onChange:function({target:t}){l({type:"UPDATE_ATTACHMENT_DESCRIPTION",index:e,description:t.value})}})):c.a.createElement(b,{addAttachment:function(t){l({type:"ADD_ATTACHMENT",index:e,attachment:t})}})))};var v=function({index:e}){const{state:t,dispatch:a}=d(),{back:n,id:l}=t.cards[e],{type:r,textOptions:s,multiOptions:o,exactOptions:m}=n;function u(t){a({type:"UPDATE_CARD_BACK",index:e,payload:t})}function b({target:e},t){const{value:a}=e;a!==n[t]&&(s[t]=a,u({textOptions:s}))}function f({target:e}){o.layout=e.value,u({multiOptions:o})}function y({target:e}){const{name:t,value:a}=e,n=o.options[t];a!==n.value&&(n.value=a,u({multiOptions:o}))}function v({target:e}){const{name:t,value:a,checked:n}=e;"caseSensitive"===t?m.caseSensitive=n:m.value=a,u({exactOptions:m})}function x(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"create-multi-layout"},c.a.createElement("div",{className:"create-multi-layout-title"},"Layout"),c.a.createElement("div",{onInput:f,className:"create-multi-layout-items"},c.a.createElement("label",{className:"create-multi-layout-item"},c.a.createElement("input",{type:"radio",className:"sr-only create-type-radio",name:"multi-"+l,value:"short",defaultChecked:"short"===o.layout}),c.a.createElement(p.a,{name:"grid",className:"create-option-type-icon"})),c.a.createElement("label",{className:"create-multi-layout-item"},c.a.createElement("input",{type:"radio",className:"sr-only create-type-radio",name:"multi-"+l,value:"medium",defaultChecked:"medium"===o.layout}),c.a.createElement(p.a,{name:"list-2-col",className:"create-option-type-icon"})),c.a.createElement("label",{className:"create-multi-layout-item"},c.a.createElement("input",{type:"radio",className:"sr-only create-type-radio",name:"multi-"+l,value:"long",defaultChecked:"long"===o.layout}),c.a.createElement(p.a,{name:"menu",className:"create-option-type-icon"})))),c.a.createElement("ul",null,o.options.map(({id:e,value:t},a)=>c.a.createElement("li",{className:"create-option",key:e},c.a.createElement("label",null,c.a.createElement("input",{type:"radio",className:"sr-only radio-input",name:l,checked:o.correctId===e,onChange:()=>function(e){o.correctId=e,u({multiOptions:o})}(e)}),c.a.createElement("div",{className:"radio create-option-radio",title:"Mark answer as correct"})),c.a.createElement("input",{type:"text",className:"input create-option-input",name:a,defaultValue:t,autoComplete:"off",onChange:y}),c.a.createElement("button",{className:"btn btn-icon",title:"Remove answer",onClick:()=>{return e=a,o.options.splice(e,1),void u({multiOptions:o});var e}},c.a.createElement(p.a,{name:"remove"}))))))}return c.a.createElement("div",{className:"create-card-side"},c.a.createElement("div",{className:"create-side-toolbar"},c.a.createElement("ul",{className:"create-side-types",onChange:function({target:e}){u({type:e.value})}},c.a.createElement("li",{className:"create-side-type"},c.a.createElement("label",null,c.a.createElement("input",{type:"radio",className:"sr-only create-type-radio",name:"type-"+l,value:"text",defaultChecked:"text"===r}),c.a.createElement(p.a,{name:"text",title:"Text",className:"create-option-type-icon"}))),c.a.createElement("li",{className:"create-side-type"},c.a.createElement("label",null,c.a.createElement("input",{type:"radio",className:"sr-only create-type-radio",name:"type-"+l,value:"multi",defaultChecked:"multi"===r}),c.a.createElement(p.a,{name:"list-checkbox",title:"Multiple choice",className:"create-option-type-icon"}))),c.a.createElement("li",{className:"create-side-type"},c.a.createElement("label",null,c.a.createElement("input",{type:"radio",className:"sr-only create-type-radio",name:"type-"+l,value:"exact",defaultChecked:"exact"===r}),c.a.createElement(p.a,{name:"text-short",title:"Exact answer",className:"create-option-type-icon"})))),"text"===r&&c.a.createElement(E,{textSize:s.textSize,handleChange:e=>b(e,"textSize")}),"multi"===r&&c.a.createElement("button",{className:"btn btn-icon",onClick:function(){o.options.length<8&&(o.options.push({id:Object(i.e)()}),u({multiOptions:o}))},title:"Add option",disabled:o.options.length>=8},c.a.createElement(p.a,{name:"add-list-item"}))),c.a.createElement("div",{className:"create-side-content"},function(e){return"text"===e?c.a.createElement("textarea",{className:"input create-side-text-input",value:s.value,style:{fontSize:s.textSize+"px"},onChange:e=>b(e,"value")}):"multi"===e?x():"exact"===e?c.a.createElement("div",{onChange:v},c.a.createElement("label",{className:"creact-exact-input-container"},c.a.createElement("div",{className:"creact-exact-input-title"},"Provide answer:"),c.a.createElement("input",{type:"text",className:"input creact-exact-input",name:"input",autoComplete:"off",defaultValue:m.value})),c.a.createElement("label",{className:"checkbox-container creact-exact-checkbox-container"},c.a.createElement("input",{type:"checkbox",className:"sr-only checkbox-input",name:"caseSensitive",defaultChecked:m.caseSensitive}),c.a.createElement("div",{className:"checkbox create-checkbox"},c.a.createElement("div",{className:"checkbox-tick"})),c.a.createElement("span",{className:"checkbox-label"},"Case sensitive"))):null}(r)))};function x({value:e,handleChange:t}){return c.a.createElement("div",{className:"deck-form-card-notes-container"},c.a.createElement("textarea",{className:"input deck-form-card-notes-input",placeholder:"Notes...",value:e,onChange:e=>t(e,"notes","value")}))}a(136);var N=a(111),h=a(99);var k=function({card:e,hide:t}){return c.a.createElement(h.a,{className:"create-card-preview-modal",hide:t},c.a.createElement("h3",{className:"modal-title"},"Card Preview"),c.a.createElement(N.a,{card:e,selectOption:t,revealAnswer:t,nextStep:t}))};var C=function({index:e,card:t,length:a,previewCard:n,cloneCard:l,swapCard:r,removeCard:i}){const{state:s,dispatch:o}=d();function m({target:a},n,c){const{value:l}=a;l!==t[n][c]&&o({type:"UPDATE_CARD_VALUE",index:e,name:n,key:c,value:l})}return c.a.createElement("div",{className:"create-card"},c.a.createElement("div",{className:"create-card-header"},c.a.createElement("div",{className:"create-card-header-a"},c.a.createElement("button",{className:"btn btn-icon",onClick:()=>r(e,-1),title:"Swap with the left card",disabled:0===e},c.a.createElement(p.a,{name:"chevron-left"})),c.a.createElement("div",{className:"create-card-index"},e+1),c.a.createElement("button",{className:"btn btn-icon",onClick:()=>r(e,1),title:"Swap with the right card",disabled:e===a-1},c.a.createElement(p.a,{name:"chevron-right"}))),c.a.createElement("div",{className:"create-card-preview-btn-container"},c.a.createElement("button",{className:"btn btn-icon",title:"Preview card",onClick:()=>n(t)},c.a.createElement(p.a,{name:"preview"})),t.message&&c.a.createElement("p",{className:"create-card-preview-message"},t.message)),c.a.createElement("button",{className:"btn btn-icon",title:"Clone card",onClick:()=>l(e)},c.a.createElement(p.a,{name:"clone"})),s.cards.length>1&&c.a.createElement("button",{className:"btn btn-icon",title:"Remove card",onClick:()=>i(e)},c.a.createElement(p.a,{name:"remove"}))),c.a.createElement("div",{className:"create-card-main"},c.a.createElement(y,{index:e,side:t.front,handleChange:m}),c.a.createElement(v,{index:e})),c.a.createElement(x,{value:t.notes.value,handleChange:m}),t.visible&&c.a.createElement(k,{card:t,hide:function(){o({type:"HIDE_PREVIEW_CARD",card:t})}}))};function g(e){const{state:t,dispatch:a}=d(),[l,s]=Object(n.useState)(""),[o,m]=Object(n.useState)([]);let E=0,b=0;function f(){return{id:Object(i.e)(),front:{text:"",textSize:16},back:{type:"text",textOptions:{value:"",textSize:16},multiOptions:{correctId:"",layout:"short",options:[{id:Object(i.e)()},{id:Object(i.e)()}]},exactOptions:{caseSensitive:!1,value:""}},notes:{value:""},score:{streak:0,right:0,wrong:0,total:0}}}function y(e){return e.attachment?!!e.attachment.description:!!e.text}function v(e,t=!1){if("text"===e.type)return e.textOptions.value.length>0;if("exact"===e.type)return e.exactOptions.value.length>0;const a=e.multiOptions.options.reduce((e,{value:t})=>(t&&(e+=1),e),0);return t?a>0:a>1&&e.multiOptions.correctId}function x({target:e}){const{name:t,value:n}=e;a({type:"UPDATE_DECK",name:t,value:n})}return Object(n.useEffect)(()=>{const{id:t}=e.match.params;"/decks/create"===e.match.path?(a({type:"RESET_DECK",deck:{id:Object(i.e)(),title:"",description:"",selectedCardIndex:0,cards:[f(),f()]}}),Object(i.f)("Create a new deck")):t&&Object(u.b)(t).then(e=>{e&&(e.selectedCardIndex=0,e.cards=e.cards.map(e=>(e.back={...f().back,...e.back,type:e.back.type,[e.back.type+"Options"]:e.back.typeOptions},delete e.back.typeOptions,e)),a({type:"RESET_DECK",deck:e}),Object(i.f)("Editing "+e.title))})},[]),Object(n.useEffect)(()=>(clearTimeout(E),E=setTimeout(()=>{s("")},3200),()=>{clearTimeout(E)}),[l]),Object(n.useEffect)(()=>(clearTimeout(b),o.length>0&&(b=setTimeout(()=>{m([])},8e3)),()=>{clearTimeout(b)}),[o.length]),t?c.a.createElement(c.a.Fragment,null,c.a.createElement("label",{className:"deck-form-field"},c.a.createElement("div",{className:"deck-form-field-title"},"TITLE"),c.a.createElement("input",{className:"input deck-form-field-input",name:"title",value:t.title,onChange:x})),c.a.createElement("label",{className:"deck-form-field"},c.a.createElement("div",{className:"deck-form-field-title"},"DESCRIPTION"),c.a.createElement("input",{className:"input deck-form-field-input",name:"description",value:t.description,onChange:x})),c.a.createElement("ul",{className:"create-card-select"},t.cards.map((e,n)=>c.a.createElement("li",{className:"create-card-select-item",key:n},c.a.createElement("button",{className:"btn btn-text create-card-select-btn"+(n===t.selectedCardIndex?" active":""),onClick:()=>function(e){e!==t.selectedCardIndex&&a({type:"SELECT_CARD",index:e})}(n)},n+1))),c.a.createElement("li",{className:"create-card-select-item"},c.a.createElement("button",{onClick:function(){const e=t.cards[t.cards.length-1],n=f();n.front.textSize=e.front.textSize,n.back.type=e.back.type,"text"===n.back.type?n.back.textOptions.textSize=e.back.textOptions.textSize:"multi"===n.back.type?n.back.multiOptions.layout=e.back.multiOptions.layout:"exact"===n.back.type&&(n.back.exactOptions.caseSensitive=e.back.exactOptions.caseSensitive),a({type:"ADD_CARD",card:n})},className:"btn btn-icon create-card-select-btn create-card-add-btn",title:"Add Card"},c.a.createElement(p.a,{name:"plus"})))),c.a.createElement(C,{index:t.selectedCardIndex,card:t.cards[t.selectedCardIndex],length:t.cards.length,previewCard:function(e){y(e.front)&&v(e.back)?(e.visible=!0,e.back.typeOptions=e.back[e.back.type+"Options"],"multi"===e.back.type&&(e.back.typeOptions.options=Object(i.g)(e.back.multiOptions.options.filter(({value:e})=>e)))):(e.message="Can't preview invalid card",setTimeout(()=>{delete e.message,a({type:"PREVIEW_CARD",card:e})},2400)),a({type:"PREVIEW_CARD",card:e})},cloneCard:function(e){const n=r()(t.cards[e]);n.id=Object(i.e)(),a({type:"INSERT_CARD",index:e+1,card:n})},swapCard:function(e,t){a({type:"SWAP_CARD",index:e,targetIndex:e+t})},removeCard:function(e){const n=t.cards[e];(y(n.front)||v(n.back)||n.notes.value)&&m([...o,n]),a({type:"REMOVE_CARD",index:e})}}),o.length>0&&c.a.createElement("div",{className:"deck-form-dialog"},c.a.createElement("span",null,"Removed ",o.length," card",o.length>1?"s":""),c.a.createElement("button",{className:"btn btn-text",onClick:function(){clearTimeout(b),m([]),a({type:"RESET_DECK",deck:{...t,cards:t.cards.concat(o)}})}},"UNDO")),c.a.createElement("div",{className:"create-footer"},l&&c.a.createElement("span",{className:"create-message"},l),c.a.createElement("button",{className:"btn",onClick:function(){if(!t.title)return void s("Title is required");const a=function(e){return e.filter(e=>y(e.front)||v(e.back,!0))}(t.cards);(function(e){let t=0;for(const{front:a,back:n}of e)y(a)&&v(n)&&(t+=1);if(t!==e.length)s("Please fill in both card sides");else{if(!(t<2))return!0;s("Please fill in at least two cards")}})(a)&&(t.cards=function(e){return e.map(e=>{const t={type:e.back.type,typeOptions:e.back[e.back.type+"Options"]};return e.modified&&(delete e.score,delete e.level,delete e.nextReview),delete e.modified,"multi"===t.type&&(t.typeOptions.options=e.back.multiOptions.options.filter(({value:e})=>e)),e.back=t,e})}(a),t.createdAt=t.createdAt||new Date,e.history.push("/decks"),Object(u.d)(t))}},"Create"))):null}t.default=function(e){return c.a.createElement(o,null,c.a.createElement(g,e))}},98:function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return i}));const n=new(a(101).a)("nimus-cards");function c(){return n.decks.toArray().then(s).catch(e=>{console.log(e)})}function l(e){return n.decks.get(e)}function r(e){n.decks.put(e).catch(e=>{console.log(e)})}function i(e){n.decks.delete(e).catch(e=>{console.log(e)})}function s(e){return e.sort((e,t)=>{const a=new Date(e.createdAt||0),n=new Date(t.createdAt||0);return a<n?1:a>n?-1:0})}n.version(1).stores({decks:"id"})},99:function(e,t,a){"use strict";var n=a(0),c=a.n(n);a(100);t.a=function({className:e,hide:t,children:a}){const l=Object(n.useCallback)((function({key:e}){"Escape"===e&&t()}),[]);return Object(n.useEffect)(()=>(window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}),[]),c.a.createElement("div",{className:"modal-mask",onClick:function({target:e,currentTarget:a}){e===a&&t()}},c.a.createElement("div",{className:"modal"+(e?" "+e:"")},a))}}}]);