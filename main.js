!function(e){function t(t){for(var n,l,r=t[0],i=t[1],o=t[2],d=0,u=[];d<r.length;d++)l=r[d],c[l]&&u.push(c[l][0]),c[l]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(m&&m(t);u.length;)u.shift()();return s.push.apply(s,o||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,r=1;r<a.length;r++){var i=a[r];0!==c[i]&&(n=!1)}n&&(s.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},c={0:0},s=[];function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var r=window.webpackJsonp=window.webpackJsonp||[],i=r.push.bind(r);r.push=t,r=r.slice();for(var o=0;o<r.length;o++)t(r[o]);var m=i;s.push([146,1]),a()}({146:function(e,t,a){"use strict";a.r(t);a(91),a(92),a(93);var n=a(0),c=a.n(n),s=a(87),l=a(5),r=a(20);function i({name:e,title:t,className:a}){return c.a.createElement("svg",{viewBox:"0 0 24 24",className:a},t&&c.a.createElement("title",null,t),c.a.createElement("path",{d:{cards:"M21.47,4.35L20.13,3.79V12.82L22.56,6.96C22.97,5.94 22.5,4.77 21.47,4.35M1.97,\n            8.05L6.93,20C7.24,20.77 7.97,21.24 8.74,21.26C9,21.26 9.27,21.21 9.53,21.1L16.9,\n            18.05C17.65,17.74 18.11,17 18.13,16.26C18.14,16 18.09,15.71 18,15.45L13,3.5C12.71,\n            2.73 11.97,2.26 11.19,2.25C10.93,2.25 10.67,2.31 10.42,2.4L3.06,5.45C2.04,5.87 1.55,\n            7.04 1.97,8.05M18.12,4.25A2,2 0 0,0 16.12,2.25H14.67L18.12,10.59",edit:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18, 2.9 17.35,2.9 16.96,\n            3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",remove:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",media:"M21,17H7V3H21M21,1H7A2,2 0 0,0 5,3V17A2,2 0 0,0 7,19H21A2,2 0 0,0 23,\n            17V3A2,2 0 0,0 21,1M3,5H1V21A2,2 0 0,0 3,23H19V21H3M15.96,10.29L13.21,13.83L11.25,\n            11.47L8.5,15H19.5L15.96,10.29Z",responsive:"M4,6V16H9V12A2,2 0 0,1 11,10H16A2,2 0 0,1 18,12V16H20V6H4M0,20V18H4A2,2 0 0,\n            1 2,16V6A2,2 0 0,1 4,4H20A2,2 0 0,1 22,6V16A2,2 0 0,1 20,18H24V20H18V20C18,21.11 17.1,\n            22 16,22H11A2,2 0 0,1 9,20H9L0,20M11.5,20A0.5,0.5 0 0,0 11,20.5A0.5,0.5 0 0,0 11.5,\n            21A0.5,0.5 0 0,0 12,20.5A0.5,0.5 0 0,0 11.5,20M15.5,20A0.5,0.5 0 0,0 15,20.5A0.5,0.5 0 0,\n            0 15.5,21A0.5,0.5 0 0,0 16,20.5A0.5,0.5 0 0,0 15.5,20M13,20V21H14V20H13M11,12V19H16V12H11Z",offline:"M2.28,3L1,4.27L2.47,5.74C2.04,6 1.61,6.29 1.2,6.6L3,9C3.53,8.6 4.08,8.25 4.66,\n            7.93L6.89,10.16C6.15,10.5 5.44,10.91 4.8,11.4L6.6,13.8C7.38,13.22 8.26,12.77 9.2,\n            12.47L11.75,15C10.5,15.07 9.34,15.5 8.4,16.2L12,21L14.46,17.73L17.74,21L19,19.72M12,\n            3C9.85,3 7.8,3.38 5.9,4.07L8.29,6.47C9.5,6.16 10.72,6 12,6C15.38,6 18.5,7.11 21,\n            9L22.8,6.6C19.79,4.34 16.06,3 12,3M12,9C11.62,9 11.25,9 10.88,9.05L14.07,12.25C15.29,\n            12.53 16.43,13.07 17.4,13.8L19.2,11.4C17.2,9.89 14.7,9 12,9Z",image:"M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,\n            5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z",audio:"M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,\n            2.89 4.89,2 6,2M9,16A2,2 0 0,0 7,18A2,2 0 0,0 9,20A2,2 0 0,0 11,18V13H14V11H10V16.27C9.71,\n            16.1 9.36,16 9,16Z",close:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",flip:"M21,9L17,5V8H10V10H17V13M7,11L3,15L7,19V16H14V14H7V11Z",text:"M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z",list:"M21,19V17H8V19H21M21,13V11H8V13H21M8,7H21V5H8V7M4,5V7H6V5H4M3,5A1,1 0 0,1 4,4H6A1,1 0 0,1 7,5V7A1,1 0 0,1 6,8H4A1,1 0 0,1 3,7V5M4,11V13H6V11H4M3,11A1,1 0 0,1 4,10H6A1,1 0 0,1 7,11V13A1,1 0 0,1 6,14H4A1,1 0 0,1 3,13V11M4,17V19H6V17H4M3,17A1,1 0 0,1 4,16H6A1,1 0 0,1 7,17V19A1,1 0 0,1 6,20H4A1,1 0 0,1 3,19V17Z",addListItem:"M2,16H10V14H2M18,14V10H16V14H12V16H16V20H18V16H22V14M14,6H2V8H14M14,10H2V12H14V10Z"}[e]}))}a(106),a(12);const o=new(a(90).a)("nimus-cards-decks");function m(){return o.decks.toArray().catch(e=>{console.log(e)})}function d({deckTitle:e,removeDeck:t,cancelRemoval:a}){return c.a.createElement("div",{className:"mask"},c.a.createElement("div",{className:"modal deck-dialog-box"},c.a.createElement("h3",{className:"deck-dialog-box-title"},"Are you sure you want to remove ",c.a.createElement("b",null,e)," deck?"),c.a.createElement("div",{className:"deck-dialog-box-btns"},c.a.createElement("button",{className:"btn-danger",onClick:t},"Remove"),c.a.createElement("button",{className:"btn-icon",onClick:a},"Cancel"))))}o.version(1).stores({decks:"++_id"});a(80);function u({deck:e,showDialog:t,editDeck:a}){return c.a.createElement("li",{className:"deck"},c.a.createElement(l.b,{to:"/decks/"+e.id,className:"deck-title"},e.title),e.description&&c.a.createElement("p",{className:"deck-description"},e.description),c.a.createElement("div",{className:"deck-card-count"},e.cards.length," card",e.cards.length>1&&"s"),c.a.createElement("div",{className:"deck-btn-container"},c.a.createElement("button",{className:"btn-icon deck-btn",title:"Edit",onClick:function(){a(e)}},c.a.createElement(i,{name:"edit"}),c.a.createElement("span",null,"Edit")),c.a.createElement("button",{className:"btn-icon deck-btn",title:"Remove",onClick:function(){t(e)}},c.a.createElement(i,{name:"remove"}),c.a.createElement("span",null,"Remove"))))}a(81),a(130);function p(e){const t=[].concat(e);let a=t.length;for(;a;){const e=Math.floor(Math.random()*a);a-=1,[t[a],t[e]]=[t[e],t[a]]}return t}function E(){return Math.random().toString(32).slice(2,10)}const h=Object(n.createContext)(null);function v(e,t){const a=e.cards[t.index];switch(t.type){case"RESET_DECK":return Object.assign({},t.deck);case"UPDATE_DECK":return Object.assign({},e,{[t.name]:t.value});case"ADD_CARD":return Object.assign({},e,{cards:[...e.cards,t.card]});case"REMOVE_CARD":return e.cards.splice(t.index,1),Object.assign({},e);case"UPDATE_SIDE_VALUE":return a[t.side][t.key]=t.value,Object.assign({},e);case"ADD_ATTACHMENT":return a.front.attachment=t.attachment,Object.assign({},e);case"REMOVE_ATTACHMENT":return delete a.front.attachment,Object.assign({},e);case"CHANGE_ANSWER_TYPE":return a.back.type=t.answerType,Object.assign({},e);case"ADD_OPTION":return a.back.options.push({id:E()}),Object.assign({},e);case"REMOVE_OPTION":return a.back.correct=0,a.back.options.splice(t.optionIndex,1),Object.assign({},e);case"CHANGE_CORRECT_ANSWER":return a.back.correct=t.optionIndex,Object.assign({},e);case"UPDATE_OPTION_TEXT":return a.back.options[t.optionIndex].text=t.value,Object.assign({},e);default:return e}}function f({textSize:e,handleChange:t}){return c.a.createElement("select",{className:"input create-side-select",title:"Text size",defaultValue:e,onChange:t},c.a.createElement("option",{value:"16"},"16px"),c.a.createElement("option",{value:"24"},"24px"),c.a.createElement("option",{value:"36"},"36px"),c.a.createElement("option",{value:"48"},"48px"))}a(131),a(132);function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class N extends c.a.Component{constructor(e){super(e),b(this,"hide",()=>{this.props.hide()}),b(this,"handleFileUpload",({target:e})=>{const{type:t}=this.props,[a]=e.files;e.value="",a.type.split("/")[0]!==t?this.showMessage("File is not an "+t):this.props.addAttachment(a,t)}),b(this,"handleFileUploadFormURL",e=>{const t=e.target.elements.url.value.trim(),{type:a}=this.props;if(e.preventDefault(),t){if("image"===a){const e=new Image;e.onload=(()=>{this.props.addAttachment(t,a)}),e.onerror=(e=>{this.showMessage("URL doesn't contain "+a+" file"),console.log(e)}),e.src=t}else if("audio"===a){const e=new Audio(t);e.onloadedmetadata=(()=>{this.props.addAttachment(t,a)}),e.onerror=(e=>{this.showMessage("URL doesn't contain "+a+" file"),console.log(e)})}}else this.showMessage("Please specify valid url")}),this.state={message:""}}showMessage(e){this.setState({message:e}),setTimeout(()=>{this.setState({message:""})},3200)}render(){const{type:e}=this.props,{message:t}=this.state;return c.a.createElement("div",{className:"mask"},c.a.createElement("div",{className:"modal upload-panel"},c.a.createElement("div",{className:"upload-panel-device-target"},c.a.createElement("div",{className:"upload-panel-device-target-title"},"Select ",e," file from device"),c.a.createElement("label",{className:"btn",tabIndex:"0"},c.a.createElement("span",null,"Select"),c.a.createElement("input",{type:"file",className:"file-input",onChange:this.handleFileUpload}))),c.a.createElement("div",{className:"upload-panel-item-separator"},"Or"),c.a.createElement("div",{className:"upload-panel-url-target"},c.a.createElement("div",{className:"upload-panel-url-target-title"},"Upload ",e," from url"),c.a.createElement("form",{onSubmit:this.handleFileUploadFormURL},c.a.createElement("input",{type:"text",name:"url",className:"input upload-panel-url-target-input"}),c.a.createElement("button",{className:"btn"},"Upload"))),c.a.createElement("div",{className:"upload-panel-footer"},t&&c.a.createElement("div",{className:"upload-panel-message"},t),c.a.createElement("button",{type:"button",className:"btn-secondary",onClick:this.hide},"Cancel"))))}}a(85);function g({file:e,type:t}){const a="string"==typeof e?e:URL.createObjectURL(e);return"image"===t?c.a.createElement("img",{src:a,alt:"",className:"side-image"}):"audio"===t?c.a.createElement("audio",{src:a,className:"side-audio",controls:!0}):null}function k({index:e,side:t,handleChange:a}){const{dispatch:s}=Object(n.useContext)(h),[l,r]=Object(n.useState)({type:"",visible:!1}),{text:o,textSize:m,attachment:d}=t;function u(){s({type:"REMOVE_ATTACHMENT",index:e})}function p(){r({visible:!1,type:""})}return c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"side-container"},c.a.createElement("div",{className:"create-side-name"},"FRONT"),c.a.createElement("div",{className:"side"},c.a.createElement("div",{className:"create-side-toolbar"},["image","audio"].map((e,t)=>c.a.createElement("button",{key:t,className:"btn-icon toolbar-btn",title:"Upload "+e,onClick:()=>(function(e){r({visible:!0,type:e})})(e)},c.a.createElement(i,{name:e}))),c.a.createElement(f,{textSize:m,handleChange:e=>a(e,"front","textSize")})),c.a.createElement("div",{className:"side-content create-side-content"},d&&function(e){return c.a.createElement("div",{className:"side-panel-container"},c.a.createElement("button",{type:"button",className:"btn-icon create-side-panel-btn",onClick:u,title:"Remove attachment"},c.a.createElement(i,{name:"remove"})),c.a.createElement(g,e))}(d),c.a.createElement("textarea",{className:"input create-side-text-input side-text",value:o,style:{fontSize:m+"px"},onChange:e=>a(e,"front","text")})))),l.visible&&c.a.createElement(N,{type:l.type,hide:p,addAttachment:function(t,a){s({type:"ADD_ATTACHMENT",index:e,attachment:{file:t,type:a}}),p()}}))}function y({index:e,handleChange:t}){const{state:a,dispatch:s}=Object(n.useContext)(h),{back:l,id:r}=a.cards[e],{type:o,text:m,textSize:d,options:u,correct:p}=l;function E(t,a){s({type:"REMOVE_OPTION",index:e,optionIndex:t,id:a})}function v(t){s({type:"CHANGE_CORRECT_ANSWER",index:e,optionIndex:t})}function b({target:t}){const{name:a,value:n}=t;n!==l.options[a].text&&s({type:"UPDATE_OPTION_TEXT",optionIndex:parseInt(a,10),index:e,value:n})}return c.a.createElement("div",{className:"side-container"},c.a.createElement("div",{className:"create-side-name"},"BACK"),c.a.createElement("div",{className:"side"},c.a.createElement("div",{className:"create-side-toolbar"},c.a.createElement("ul",{className:"create-side-types",onChange:function({target:t}){s({type:"CHANGE_ANSWER_TYPE",answerType:t.value,index:e})}},c.a.createElement("li",{className:"create-side-type"},c.a.createElement("label",null,c.a.createElement("input",{type:"radio",className:"radio-input",value:"text",name:"type-"+r,defaultChecked:"text"===o}),c.a.createElement(i,{name:"text",title:"Text",className:"create-option-type-icon"}))),c.a.createElement("li",{className:"create-side-type"},c.a.createElement("label",null,c.a.createElement("input",{type:"radio",className:"radio-input",value:"multi",name:"type-"+r,defaultChecked:"multi"===o}),c.a.createElement(i,{name:"list",title:"Multiple choice",className:"create-option-type-icon"})))),"text"===o&&c.a.createElement(f,{textSize:d,handleChange:e=>t(e,"back","textSize")}),"multi"===o&&c.a.createElement("button",{className:"btn-icon",onClick:function(){s({type:"ADD_OPTION",index:e})},title:"Add option"},c.a.createElement(i,{name:"addListItem"}))),c.a.createElement("div",{className:"side-content create-side-content"},function(e){return"text"===e?c.a.createElement("textarea",{className:"input create-side-text-input side-text",value:m,style:{fontSize:d+"px"},onChange:e=>t(e,"back","text")}):c.a.createElement("ul",null,u.map(({text:e,id:t},a)=>c.a.createElement("li",{className:"create-option",key:t},c.a.createElement("label",null,c.a.createElement("input",{type:"radio",className:"radio-input",name:r,checked:p===a,onChange:()=>v(a)}),c.a.createElement("div",{className:"radio create-option-radio",title:"Mark answer as correct"})),c.a.createElement("input",{type:"text",className:"input create-option-input",name:a,defaultValue:e,autoComplete:"off",onChange:b}),c.a.createElement("button",{className:"btn-icon",title:"Remove answer",onClick:()=>E(a,t)},c.a.createElement(i,{name:"remove"})))))}(o))))}function x({index:e,card:t}){const{dispatch:a}=Object(n.useContext)(h);function s({target:n},c,s){const{value:l}=n;l!==t[c][s]&&a({type:"UPDATE_SIDE_VALUE",index:e,side:c,key:s,value:l})}return c.a.createElement("li",{className:"create-list-item"},c.a.createElement("div",{className:"create-card-index"},e+1,"."),c.a.createElement("div",{className:"create-input-group create-card"},c.a.createElement(k,{index:e,side:t.front,handleChange:s}),c.a.createElement(y,{index:e,handleChange:s})),c.a.createElement("div",{className:"create-card-btns"},c.a.createElement("button",{className:"btn-icon",title:"Remove card",onClick:function(){a({type:"REMOVE_CARD",id:t.id})}},c.a.createElement(i,{name:"remove"}))))}function C(e){const[t,a]=Object(n.useReducer)(v,function(e={}){return Object.assign({id:E(),title:"",description:"",cards:[i()]},e)}(e.location.state)),[s,l]=Object(n.useState)("");let r=0;function i(){return{id:E(),front:{text:"",textSize:16},back:{type:"text",text:"",textSize:16,correct:0,options:[{id:E()},{id:E()}]}}}function o(e){if("text"===e.type)return e.text.length>0;return e.options.reduce((e,{text:t})=>(t&&(e+=1),e),0)>1}function d({target:e}){const{name:t,value:n}=e;a({type:"UPDATE_DECK",name:t,value:n})}return Object(n.useEffect)(()=>(clearTimeout(r),r=setTimeout(()=>{l("")},3200),()=>{clearTimeout(r)}),[s]),Object(n.useEffect)(()=>{const{id:t}=e.match.params;t&&!e.location.state&&m().then(e=>{const n=function(e,t){return e.find(({id:e})=>e===t)}(e,t);n&&a({type:"RESET_DECK",deck:n})})},[]),c.a.createElement(h.Provider,{value:{state:t,dispatch:a}},c.a.createElement("div",{className:"create-input-group"},c.a.createElement("label",{className:"create-input-label"},c.a.createElement("div",{className:"create-side-name"},"TITLE"),c.a.createElement("input",{className:"input create-title-input",name:"title",value:t.title,onChange:d})),c.a.createElement("label",{className:"create-input-label"},c.a.createElement("div",{className:"create-side-name"},"DESCRIPTION (OPTIONAL)"),c.a.createElement("textarea",{className:"input side-text create-description-input",name:"description",value:t.description,onChange:d}))),t.cards.length?c.a.createElement("ul",null,t.cards.map((e,t)=>c.a.createElement(x,{key:e.id,index:t,card:e}))):c.a.createElement("p",{className:"create-deck-message"},"Deck is empty"),c.a.createElement("div",{className:"container-footer create-footer"},c.a.createElement("button",{className:"btn",onClick:function(){const e=t.cards[t.cards.length-1],n=i();e&&(n.front.textSize=e.front.textSize,n.back.textSize=e.back.textSize,n.back.type=e.back.type),a({type:"ADD_CARD",card:n})}},"New Card"),s&&c.a.createElement("span",{className:"create-message"},s),c.a.createElement("button",{className:"btn",onClick:function(){if(!t.title)return void l("Title is required");(function(e){let t=0;for(const n of e){const{front:e,back:c}=n;((a=e).text||a.attachment)&&o(c)&&(t+=1)}var a;if(t!==e.length)l("Please fill in both card sides");else{if(!(t<2))return!0;l("Please fill in at least two cards")}})(t.cards)&&(t.cards=t.cards.map(e=>("text"===e.back.type?(e.back.correct=0,e.back.options=e.back.options.slice(0,2).map(e=>(e.text="",e))):(e.back.text="",e.back.options=e.back.options.filter(({text:e})=>e)),e)),e.history.push({pathname:"/decks",state:t}))}},"Create")))}a(142),a(145);let L=JSON.parse(localStorage.getItem("nimus-cards-settings"))||{studyMode:{value:"standard"},randomize:{value:!0},cardCount:{value:""},timeoutDuration:{value:""}};function A(){return L}function H({score:e,name:t}){const a={width:(e.total?e[t]/e.total*100:50)+"%"};return c.a.createElement("div",{className:"score-bar score-"+t+"-bar",style:a},e[t])}function M({score:e,mode:t}){return c.a.createElement("div",{className:"study-header"},"standard"===t?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"study-score-bar-name-container"},c.a.createElement("span",null,"Right"),c.a.createElement("span",null,"Wrong")),c.a.createElement("div",{className:"study-score-bar-container"},c.a.createElement(H,{score:e,name:"right"}),c.a.createElement(H,{score:e,name:"wrong"}))):c.a.createElement("div",{className:"study-score-table"},c.a.createElement("div",{className:"study-score-table-cell"},c.a.createElement("div",{className:"study-score-table-cell-name"},"Level"),c.a.createElement("div",null,"Cards")),e.levels.map((t,a)=>c.a.createElement("div",{className:"study-score-table-cell"+(e.currentLevel===a?" active":""),key:a},c.a.createElement("div",{className:"study-score-table-cell-name"},4===a?"Learned":a+1),c.a.createElement("div",null,t.length)))))}function O({title:e,score:t,mode:a,initNextStandardRound:n,initNextLeitnerLevel:s}){const{session:r}=t;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",{className:"component-header study-deck-title"},e),c.a.createElement("div",{className:"deck-score-container"},c.a.createElement("h3",{className:"deck-score-title"},"Session Results"),c.a.createElement("div",{className:"deck-score-in-percent"},Math.round(r.right/r.total*100),"%"),c.a.createElement("div",{className:"deck-score-bars"},c.a.createElement("div",{className:"deck-score-bar-container"},c.a.createElement("span",{className:"deck-score-bar-name"},"Right"),c.a.createElement("div",{className:"deck-score-bar"},c.a.createElement(H,{score:r,name:"right"}))),c.a.createElement("div",{className:"deck-score-bar-container"},c.a.createElement("span",{className:"deck-score-bar-name"},"Wrong"),c.a.createElement("div",{className:"deck-score-bar"},c.a.createElement(H,{score:r,name:"wrong"})))),c.a.createElement("div",{className:"deck-score-btn-container"},!t.isLast&&("standard"===a?c.a.createElement("button",{className:"btn deck-score-btn",onClick:n},"Next Round"):function(){let e=t.currentLevel+1;return t.wrong?e-=e>1?1:0:e+=1,c.a.createElement("button",{className:"btn deck-score-btn",onClick:s},"Continue to Level ",e)}()),c.a.createElement(l.b,{to:"/decks",className:"btn"},"Close"))))}function V({side:e}){const[{imageExpanded:t,imageSrc:a},s]=Object(n.useState)({}),{attachment:l,text:r,textSize:i}=e;return c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"side-container"},c.a.createElement("div",{className:"side"},c.a.createElement("div",{className:"study-side-content"},l&&c.a.createElement("div",{className:"side-panel-container"+(r?"":" full"),onClick:function(){const{file:e,type:t}=l;"image"===t&&s({imageExpanded:!0,imageSrc:"string"==typeof e?e:URL.createObjectURL(e)})}},c.a.createElement(g,l)),r&&c.a.createElement("div",{className:"side-text study-side-text"},c.a.createElement("div",{style:{fontSize:i+"px"}},r))))),t&&c.a.createElement("div",{className:"mask",onClick:function(){s({imageExpanded:!1})}},c.a.createElement("img",{src:a,className:"study-expaned-image",alt:""})))}function w({card:e,selectOption:t}){const{id:a,back:n,answerRevealed:s}=e,{text:l,textSize:r,type:i,options:o,correct:m}=n;return c.a.createElement("div",{className:"side-container"},c.a.createElement("div",{className:"side"},c.a.createElement("div",{className:"study-side-content"},"text"===i?c.a.createElement("div",{className:"side-text study-side-text"},c.a.createElement("div",{style:{fontSize:r+"px"}},l)):c.a.createElement("ul",{onChange:t,className:"study-options "+(s?"revealed":"")},o.map(({text:e},t)=>c.a.createElement("li",{key:t,className:s&&m===t?"study-option-correct":""},c.a.createElement("label",{className:"study-option-radio-container"},c.a.createElement("input",{type:"radio",className:"radio-input",name:a,disabled:s,"data-index":t,defaultChecked:0===t}),c.a.createElement("div",{className:"radio study-option-radio",title:s?"":"Mark answer as correct"}),c.a.createElement("span",null,e))))))))}function S({card:e,selectOption:t}){return c.a.createElement("div",{className:"study-card "+e.back.type},"multi"===e.back.type?c.a.createElement(c.a.Fragment,null,c.a.createElement(V,{side:e.front}),c.a.createElement(w,{card:e,selectOption:t})):e.answerRevealed?c.a.createElement(w,{card:e,selectOption:t}):c.a.createElement(V,{side:e.front}))}class T extends c.a.Component{constructor(e){super(e),this.state={duration:e.duration},this.timeoutId=0}componentDidMount(){this.runTimer(performance.now(),0)}componentWillUnmount(){clearTimeout(this.timeoutId)}getSeconds(e){const t=e%60;return t<10?"0"+t:t}getMinutes(e){const t=Math.floor(e/60%60);return e>=3600&&t<10?"0"+t:t}getHours(e){return Math.floor(e/3600)}formatDuration(e){const t=this.getSeconds(e),a=this.getMinutes(e),n=this.getHours(e);return(n?n+":":"")+a+":"+t}runTimer(e,t){const a=performance.now()-e-t;this.timeoutId=setTimeout(()=>{this.update(e,t+1e3)},1e3-a)}update(e,t){const a=this.state.duration-1;if(a<1)return this.setState({duration:a}),void this.props.callback();this.setState({duration:a},()=>{this.runTimer(e,t)})}render(){const e=this.formatDuration(this.state.duration);return c.a.createElement("div",{className:"study-timer"},e)}}function R(e,t){return Object.assign({},e,t)}Object(s.render)(c.a.createElement(l.a,null,c.a.createElement(function(){return c.a.createElement("header",{className:"header"},c.a.createElement("nav",{className:"header-nav"},c.a.createElement(l.b,{to:"/",className:"header-logo-link"},c.a.createElement(i,{name:"cards",className:"header-logo-icon"}),c.a.createElement("span",null,"NimusCards")),c.a.createElement("ul",{className:"header-nav-items"},c.a.createElement("li",{className:"header-nav-item"},c.a.createElement(l.c,{to:"/decks/create",className:"header-link",activeClassName:"active"},"Create")),c.a.createElement("li",{className:"header-nav-item"},c.a.createElement(l.c,{to:"/decks",exact:!0,className:"header-link",activeClassName:"active"},"Decks")),c.a.createElement("li",{className:"header-nav-item"},c.a.createElement(l.c,{to:"/settings",className:"header-link",activeClassName:"active"},"Settings")))))},null),c.a.createElement("main",{className:"main"},c.a.createElement(r.c,null,c.a.createElement(r.a,{path:"/",exact:!0,component:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"home-hero"},c.a.createElement("h1",{className:"home-hero-title"},"NimusCards"),c.a.createElement("p",{className:"home-hero-desc"},"Simple learning with flashcards."),c.a.createElement(l.b,{to:"/decks/create",className:"btn home-hero-btn"},"Get Started")),c.a.createElement("h2",{className:"home-features-title"},"Features"),c.a.createElement("ul",{className:"home-features"},c.a.createElement("li",{className:"home-feature"},c.a.createElement(i,{name:"media",className:"home-icon"}),c.a.createElement("h3",{className:"home-feature-title"},"Media-Rich"),c.a.createElement("p",null,"Easily add images and sounds to your flashcards.")),c.a.createElement("li",{className:"home-feature"},c.a.createElement(i,{name:"responsive",className:"home-icon"}),c.a.createElement("h3",{className:"home-feature-title"},"Responsive"),c.a.createElement("p",null,"Responsive web design makes user experience consistent across multiple devices.")),c.a.createElement("li",{className:"home-feature"},c.a.createElement(i,{name:"offline",className:"home-icon"}),c.a.createElement("h3",{className:"home-feature-title"},"Works Offline"),c.a.createElement("p",null,"Even without connection, you can still use NimusCards."))))}}),c.a.createElement(r.a,{path:"/decks",exact:!0,component:function(e){const[t,a]=Object(n.useState)([]),[s,r]=Object(n.useState)({visible:!1}),[i,p]=Object(n.useState)(!0);function E(e,t){return e.findIndex(({id:e})=>e===t)}function h(t){e.history.push({pathname:"/decks/"+t.id+"/edit",state:t})}function v(e){r({visible:!0,deck:e})}function f(){r({visible:!1,deck:null})}return Object(n.useEffect)(()=>{(async function(e){const t=await m();if(e){const n=E(t,e.id);-1===n?t.push(e):t.splice(n,1,e),a=e,o.decks.put(a).catch(e=>{console.log(e)})}var a;return t})(e.location.state).then(e=>{a(e),p(!1)})},[]),c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"component-header deck-list-header"},c.a.createElement("h1",{className:"deck-list-title"},"Your Decks"),c.a.createElement(l.b,{to:"/decks/create",className:"btn deck-list-btn"},"Create")),i?"":t.length?c.a.createElement("ul",null,function(e){return e.map(e=>c.a.createElement(u,{key:e.id,deck:e,showDialog:v,editDeck:h}))}(t)):c.a.createElement("h2",{className:"deck-list-message"},"You have no decks"),s.visible&&c.a.createElement(d,{deckTitle:s.deck.title,removeDeck:function(){const e=E(t,s.deck.id);var n;t.splice(e,1),a([...t]),n=s.deck._id,o.decks.delete(n).catch(e=>{console.log(e)}),f()},cancelRemoval:f}))}}),c.a.createElement(r.a,{path:"/decks/create",component:C,key:"create"}),c.a.createElement(r.a,{path:"/decks/:id",exact:!0,component:function(e){const[t,a]=Object(n.useReducer)(R,{card:null,score:null,cards:[],initialCards:[],title:"",selectedOption:0,wasLastCard:!1}),{cards:s,card:l,score:r,initialCards:i,title:o}=t,d=A();function u(e){const t=h({currentLevel:0,session:h()});if("standard"===d.studyMode.value)t.incorrectIds=[];else{const a=e.map(e=>e.id);t.levels=[a,[],[],[],[]]}return t}function E(e,t=0){const{id:a,front:n,back:c}=e[t];return{index:t,id:a,front:n,back:c,answerRevealed:!1}}function h(e={}){return Object.assign({},e,{right:0,wrong:0,total:0})}function v(e,t){e?t.right+=1:t.wrong+=1,t.total=t.right+t.wrong}function f(e){return v(e,r),v(e,r.session),"standard"===d.studyMode.value?function(e,t){return e||t.incorrectIds.push(l.id),t.isLast=t.right===t.total,t}(e,r):function(e,t){let a=t.currentLevel;if(e)a+=1;else{if(!a)return t;a-=1}const n=t.levels[t.currentLevel],c=n.findIndex(e=>e===l.id),[s]=n.splice(c,1);return t.levels[a].push(s),t.isLast=t.levels[4].length===i.length,t}(e,r)}function b(e,t){return e.filter(e=>t.includes(e.id))}function N(e,t){const n=d.randomize.value?p(t):t;a({score:h(e),card:E(n),cards:n,wasLastCard:!1})}function g(){let e=r;l.answerRevealed=!0,"multi"===l.back.type&&(e=f(l.back.correct===t.selectedOption)),a({card:l,score:e})}function k(e){const t=l.index+1,n=t===s.length;let c=null,i=r;n||(c=E(s,t)),"boolean"==typeof e&&(i=f(e)),a({wasLastCard:n,score:i,card:c})}return Object(n.useEffect)(()=>{m().then(t=>{const{id:n}=e.match.params,c=t.find(e=>e.id===n);c?function({title:e,cards:t}){const n=function(e){const t=d.cardCount.value,a=d.randomize.value?p(e):e;return t?a.slice(0,t):a}(t);a({title:e,initialCards:n,cards:[...n],card:E(n),score:u(n)})}(c):e.history.replace("/decks")})},[]),t.wasLastCard?c.a.createElement(O,{score:r,title:o,mode:d.studyMode.value,initNextStandardRound:function(){const e=b(s,r.incorrectIds);r.currentLevel+=1,r.incorrectIds.length=0,N(r,e)},initNextLeitnerLevel:function(){const{levels:e}=r,t=e.findIndex(e=>e.length),a=b(i,e[t]);r.currentLevel=t,N(r,a)}}):l?c.a.createElement(n.Fragment,null,c.a.createElement("h1",{className:"component-header study-deck-title"},o),c.a.createElement("div",{className:"study-container"},c.a.createElement(M,{score:r,mode:d.studyMode.value}),c.a.createElement(S,{card:l,selectOption:function({target:e}){a({selectedOption:parseInt(e.getAttribute("data-index"),10)})}})),c.a.createElement("div",{className:"container-footer"},c.a.createElement("span",{className:"study-progress"},"Progress: ",l.index+1,"/",s.length),l.answerRevealed?"text"===l.back.type?c.a.createElement(n.Fragment,null,c.a.createElement("button",{className:"btn-danger study-footer-btn",onClick:()=>k(!1)},"I Was Wrong"),c.a.createElement("button",{className:"btn-success study-footer-btn",onClick:()=>k(!0)},"I Got It Right")):c.a.createElement("button",{className:"btn",onClick:k},"Next"):c.a.createElement(n.Fragment,null,d.timeoutDuration.value>0&&c.a.createElement(T,{duration:d.timeoutDuration.value,callback:g}),c.a.createElement("button",{className:"btn",onClick:g},"Reveal")))):null}}),c.a.createElement(r.a,{path:"/decks/:id/edit",component:C,key:"edit"}),c.a.createElement(r.a,{path:"/settings",component:function(){const[e,t]=Object(n.useState)(A());return Object(n.useEffect)(()=>{!function(e){L=Object.assign({},L,e),localStorage.setItem("nimus-cards-settings",JSON.stringify(L))}(e)},[e]),c.a.createElement("div",{onChange:function({target:a}){const n=a.getAttribute("data-name"),c=e[n];switch(a.type){case"checkbox":c.value=a.checked;break;case"text":c.value=a.validity.valid&&parseInt(a.value,10)||0;break;case"radio":c.value=a.getAttribute("data-study-mode")}t(Object.assign({},e,{[n]:c}))}},c.a.createElement("div",{className:"settings-item"},c.a.createElement("div",{className:"settings-item-title"},"Study mode"),c.a.createElement("label",{className:"settings-label settings-radio-label"},c.a.createElement("input",{type:"radio",name:"study-mode",className:"radio-input","data-name":"studyMode","data-study-mode":"standard",defaultChecked:"standard"===e.studyMode.value}),c.a.createElement("div",{className:"radio settings-radio"}),c.a.createElement("span",null,"Standard")),c.a.createElement("label",{className:"settings-label settings-radio-label"},c.a.createElement("input",{type:"radio",name:"study-mode",className:"radio-input","data-name":"studyMode","data-study-mode":"leitner",defaultChecked:"leitner"===e.studyMode.value}),c.a.createElement("div",{className:"radio settings-radio"}),c.a.createElement("span",null,"Leitner system"))),c.a.createElement("label",{className:"settings-item settings-label"},c.a.createElement("input",{type:"checkbox",className:"checkbox-input","data-name":"randomize",defaultChecked:e.randomize.value}),c.a.createElement("div",{className:"checkbox settings-checkbox"},c.a.createElement("div",{className:"checkbox-tick"})),c.a.createElement("span",null,"Randomize cards")),c.a.createElement("label",{className:"settings-item"},c.a.createElement("span",null,"Use"),c.a.createElement("input",{type:"text",className:"input settings-input","data-name":"cardCount",pattern:"^[0-9]+$",defaultValue:e.cardCount.value}),c.a.createElement("span",null,"cards per study session"),c.a.createElement("div",{className:"settings-message"},"Please provide a valid whole number.")),c.a.createElement("label",{className:"settings-item"},c.a.createElement("span",null,"Reveal answer after"),c.a.createElement("input",{type:"text",className:"input settings-input","data-name":"timeoutDuration",pattern:"^0*|0*([5-9][0-9]*|[1-9]+[0-9]+)$",defaultValue:e.timeoutDuration.value}),c.a.createElement("span",null,"seconds"),c.a.createElement("div",{className:"settings-message"},"Please provide a valid whole number.",c.a.createElement("br",null)," Minimal accepted value is 5 seconds.")))}}),c.a.createElement(r.a,{component:function(){return c.a.createElement("p",{className:"no-match-message"},"This page isn't available")}})),c.a.createElement(class extends c.a.Component{constructor(e){super(e),this.state={visible:!1,message:""}}componentDidMount(){window.addEventListener("sw-state-change",({detail:e})=>{"init"===e?this.showPopup("Content is cached for offline use."):"update"===e&&this.showPopup("Update is available, please refresh.")})}showPopup(e){this.setState({visible:!0,message:e}),setTimeout(()=>{this.setState({visible:!1})},6e3)}render(){return c.a.createElement("div",{className:"service-worker-popup"+(this.state.visible?" visible":"")},c.a.createElement("p",{className:"service-worker-popup-message"},this.state.message))}},null))),document.getElementById("app")),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").then(e=>{e.onupdatefound=(()=>{const t=e.installing;t.onstatechange=(()=>{"installed"===t.state&&function(e,t=null){const a=new CustomEvent(e,{detail:t});window.dispatchEvent(a)}("sw-state-change",navigator.serviceWorker.controller?"update":"init")})})}).catch(console.log)})},92:function(e,t,a){},93:function(e,t,a){}});