!function(e){function t(t){for(var n,l,r=t[0],i=t[1],o=t[2],d=0,u=[];d<r.length;d++)l=r[d],c[l]&&u.push(c[l][0]),c[l]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(m&&m(t);u.length;)u.shift()();return s.push.apply(s,o||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,r=1;r<a.length;r++){var i=a[r];0!==c[i]&&(n=!1)}n&&(s.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},c={0:0},s=[];function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var r=window.webpackJsonp=window.webpackJsonp||[],i=r.push.bind(r);r.push=t,r=r.slice();for(var o=0;o<r.length;o++)t(r[o]);var m=i;s.push([146,1]),a()}({146:function(e,t,a){"use strict";a.r(t);a(92),a(93),a(94);var n=a(0),c=a.n(n),s=a(88),l=a(5),r=a(19);function i(e){let t=e.name,a=e.title,n=e.className;return c.a.createElement("svg",{viewBox:"0 0 24 24",className:n},a&&c.a.createElement("title",null,a),c.a.createElement("path",{d:{cards:"M21.47,4.35L20.13,3.79V12.82L22.56,6.96C22.97,5.94 22.5,4.77 21.47,4.35M1.97,\n            8.05L6.93,20C7.24,20.77 7.97,21.24 8.74,21.26C9,21.26 9.27,21.21 9.53,21.1L16.9,\n            18.05C17.65,17.74 18.11,17 18.13,16.26C18.14,16 18.09,15.71 18,15.45L13,3.5C12.71,\n            2.73 11.97,2.26 11.19,2.25C10.93,2.25 10.67,2.31 10.42,2.4L3.06,5.45C2.04,5.87 1.55,\n            7.04 1.97,8.05M18.12,4.25A2,2 0 0,0 16.12,2.25H14.67L18.12,10.59",edit:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18, 2.9 17.35,2.9 16.96,\n            3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",remove:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",media:"M21,17H7V3H21M21,1H7A2,2 0 0,0 5,3V17A2,2 0 0,0 7,19H21A2,2 0 0,0 23,\n            17V3A2,2 0 0,0 21,1M3,5H1V21A2,2 0 0,0 3,23H19V21H3M15.96,10.29L13.21,13.83L11.25,\n            11.47L8.5,15H19.5L15.96,10.29Z",responsive:"M4,6V16H9V12A2,2 0 0,1 11,10H16A2,2 0 0,1 18,12V16H20V6H4M0,20V18H4A2,2 0 0,\n            1 2,16V6A2,2 0 0,1 4,4H20A2,2 0 0,1 22,6V16A2,2 0 0,1 20,18H24V20H18V20C18,21.11 17.1,\n            22 16,22H11A2,2 0 0,1 9,20H9L0,20M11.5,20A0.5,0.5 0 0,0 11,20.5A0.5,0.5 0 0,0 11.5,\n            21A0.5,0.5 0 0,0 12,20.5A0.5,0.5 0 0,0 11.5,20M15.5,20A0.5,0.5 0 0,0 15,20.5A0.5,0.5 0 0,\n            0 15.5,21A0.5,0.5 0 0,0 16,20.5A0.5,0.5 0 0,0 15.5,20M13,20V21H14V20H13M11,12V19H16V12H11Z",offline:"M2.28,3L1,4.27L2.47,5.74C2.04,6 1.61,6.29 1.2,6.6L3,9C3.53,8.6 4.08,8.25 4.66,\n            7.93L6.89,10.16C6.15,10.5 5.44,10.91 4.8,11.4L6.6,13.8C7.38,13.22 8.26,12.77 9.2,\n            12.47L11.75,15C10.5,15.07 9.34,15.5 8.4,16.2L12,21L14.46,17.73L17.74,21L19,19.72M12,\n            3C9.85,3 7.8,3.38 5.9,4.07L8.29,6.47C9.5,6.16 10.72,6 12,6C15.38,6 18.5,7.11 21,\n            9L22.8,6.6C19.79,4.34 16.06,3 12,3M12,9C11.62,9 11.25,9 10.88,9.05L14.07,12.25C15.29,\n            12.53 16.43,13.07 17.4,13.8L19.2,11.4C17.2,9.89 14.7,9 12,9Z",image:"M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,\n            5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z",audio:"M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,\n            2.89 4.89,2 6,2M9,16A2,2 0 0,0 7,18A2,2 0 0,0 9,20A2,2 0 0,0 11,18V13H14V11H10V16.27C9.71,\n            16.1 9.36,16 9,16Z",close:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",flip:"M21,9L17,5V8H10V10H17V13M7,11L3,15L7,19V16H14V14H7V11Z",text:"M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z","text-short":"M4,9H20V11H4V9M4,13H14V15H4V13Z",list:"M21,19V17H8V19H21M21,13V11H8V13H21M8,7H21V5H8V7M4,5V7H6V5H4M3,5A1,1 0 0,1 4,4H6A1,1 0 0,1 7,5V7A1,1 0 0,1 6,8H4A1,1 0 0,1 3,7V5M4,11V13H6V11H4M3,11A1,1 0 0,1 4,10H6A1,1 0 0,1 7,11V13A1,1 0 0,1 6,14H4A1,1 0 0,1 3,13V11M4,17V19H6V17H4M3,17A1,1 0 0,1 4,16H6A1,1 0 0,1 7,17V19A1,1 0 0,1 6,20H4A1,1 0 0,1 3,19V17Z","add-list-item":"M2,16H10V14H2M18,14V10H16V14H12V16H16V20H18V16H22V14M14,6H2V8H14M14,10H2V12H14V10Z",info:"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}[t]}))}a(107),a(22);const o=new(a(91).a)("nimus-cards-decks");function m(){return o.decks.toArray().catch(e=>{console.log(e)})}function d(e){let t=e.deckTitle,a=e.removeDeck,n=e.cancelRemoval;return c.a.createElement("div",{className:"mask"},c.a.createElement("div",{className:"modal deck-dialog-box"},c.a.createElement("h3",{className:"deck-dialog-box-title"},"Are you sure you want to remove ",c.a.createElement("b",null,t)," deck?"),c.a.createElement("div",{className:"deck-dialog-box-btns"},c.a.createElement("button",{className:"btn-danger",onClick:a},"Remove"),c.a.createElement("button",{className:"btn-icon",onClick:n},"Cancel"))))}o.version(1).stores({decks:"++_id"});a(80);function u(e){let t=e.deck,a=e.showDialog,n=e.editDeck;return c.a.createElement("li",{className:"deck"},c.a.createElement(l.b,{to:"/decks/"+t.id,className:"deck-title"},t.title),t.description&&c.a.createElement("p",{className:"deck-description"},t.description),c.a.createElement("div",{className:"deck-card-count"},t.cards.length," card",t.cards.length>1&&"s"),c.a.createElement("div",{className:"deck-btn-container"},c.a.createElement("button",{className:"btn-icon deck-btn",title:"Edit",onClick:function(){n(t)}},c.a.createElement(i,{name:"edit"}),c.a.createElement("span",null,"Edit")),c.a.createElement("button",{className:"btn-icon deck-btn",title:"Remove",onClick:function(){a(t)}},c.a.createElement(i,{name:"remove"}),c.a.createElement("span",null,"Remove"))))}a(81),a(83),a(133);function p(e){const t=[].concat(e);let a=t.length;for(;a;){const e=Math.floor(Math.random()*a);a-=1;var n=[t[e],t[a]];t[a]=n[0],t[e]=n[1]}return t}function E(){return Math.random().toString(32).slice(2,10)}const h=Object(n.createContext)(null);function v(e){let t=e.children;const a=Object(n.useReducer)(b,{title:"",description:"",cards:[]}),s=a[0],l=a[1],r=Object(n.useMemo)(()=>({state:s,dispatch:l}),[s]);return c.a.createElement(h.Provider,{value:r},t)}function b(e,t){const a=e.cards[t.index];switch(t.type){case"RESET_DECK":return Object.assign({},t.deck);case"UPDATE_DECK":return Object.assign({},e,{[t.name]:t.value});case"ADD_CARD":return Object.assign({},e,{cards:[...e.cards,t.card]});case"REMOVE_CARD":return e.cards.splice(t.index,1),Object.assign({},e);case"UPDATE_SIDE_VALUE":return a[t.side][t.key]=t.value,Object.assign({},e);case"ADD_ATTACHMENT":return a.front.attachment=t.attachment,Object.assign({},e);case"REMOVE_ATTACHMENT":return delete a.front.attachment,Object.assign({},e);case"CHANGE_ANSWER_TYPE":return a.back.type=t.answerType,Object.assign({},e);case"ADD_OPTION":return a.back.options.push({id:E()}),Object.assign({},e);case"REMOVE_OPTION":return a.back.correct=0,a.back.options.splice(t.optionIndex,1),Object.assign({},e);case"CHANGE_CORRECT_ANSWER":return a.back.correct=t.optionIndex,Object.assign({},e);case"UPDATE_OPTION_TEXT":return a.back.options[t.optionIndex].text=t.value,Object.assign({},e);case"UPDATE_EXACT_ANSWER":return a.back[t.name]=t.value,Object.assign({},e);default:return e}}function f(e){let t=e.textSize,a=e.handleChange;return c.a.createElement("select",{className:"input create-side-select",title:"Text size",defaultValue:t,onChange:a},c.a.createElement("option",{value:"16"},"16px"),c.a.createElement("option",{value:"24"},"24px"),c.a.createElement("option",{value:"36"},"36px"),c.a.createElement("option",{value:"48"},"48px"))}a(134);function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class g extends c.a.Component{constructor(e){super(e),N(this,"hide",()=>{this.props.hide()}),N(this,"handleFileUpload",e=>{let t=e.target;const a=this.props.type,n=t.files[0];t.value="",n.type.split("/")[0]!==a?this.showMessage("File is not an "+a):this.props.addAttachment(n,a)}),N(this,"handleFileUploadFormURL",e=>{const t=e.target.elements.url.value.trim(),a=this.props.type;if(e.preventDefault(),t){if("image"===a){const e=new Image;e.onload=(()=>{this.props.addAttachment(t,a)}),e.onerror=(e=>{this.showMessage("URL doesn't contain "+a+" file"),console.log(e)}),e.src=t}else if("audio"===a){const e=new Audio(t);e.onloadedmetadata=(()=>{this.props.addAttachment(t,a)}),e.onerror=(e=>{this.showMessage("URL doesn't contain "+a+" file"),console.log(e)})}}else this.showMessage("Please specify valid url")}),this.state={message:""}}showMessage(e){this.setState({message:e}),setTimeout(()=>{this.setState({message:""})},3200)}render(){const e=this.props.type,t=this.state.message;return c.a.createElement("div",{className:"mask"},c.a.createElement("div",{className:"modal upload-panel"},c.a.createElement("div",{className:"upload-panel-device-target"},c.a.createElement("div",{className:"upload-panel-device-target-title"},"Select ",e," file from device"),c.a.createElement("label",{className:"btn",tabIndex:"0"},c.a.createElement("span",null,"Select"),c.a.createElement("input",{type:"file",className:"file-input",onChange:this.handleFileUpload}))),c.a.createElement("div",{className:"upload-panel-item-separator"},"Or"),c.a.createElement("div",{className:"upload-panel-url-target"},c.a.createElement("div",{className:"upload-panel-url-target-title"},"Upload ",e," from url"),c.a.createElement("form",{onSubmit:this.handleFileUploadFormURL},c.a.createElement("input",{type:"text",name:"url",className:"input upload-panel-url-target-input"}),c.a.createElement("button",{className:"btn"},"Upload"))),c.a.createElement("div",{className:"upload-panel-footer"},t&&c.a.createElement("div",{className:"upload-panel-message"},t),c.a.createElement("button",{type:"button",className:"btn-secondary",onClick:this.hide},"Cancel"))))}}a(86);function k(e){let t=e.file,a=e.type;const n="string"==typeof t?t:URL.createObjectURL(t);return"image"===a?c.a.createElement("img",{src:n,alt:"",className:"side-image"}):"audio"===a?c.a.createElement("audio",{src:n,className:"side-audio",controls:!0}):null}function x(e){let t=e.index,a=e.side,s=e.handleChange;const l=Object(n.useContext)(h).dispatch,r=Object(n.useState)({type:"",visible:!1}),o=r[0],m=r[1],d=a.text,u=a.textSize,p=a.attachment;function E(){l({type:"REMOVE_ATTACHMENT",index:t})}function v(){m({visible:!1,type:""})}return c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"side-container"},c.a.createElement("div",{className:"create-side-name"},"FRONT"),c.a.createElement("div",{className:"side"},c.a.createElement("div",{className:"create-side-toolbar"},["image","audio"].map((e,t)=>c.a.createElement("button",{key:t,className:"btn-icon toolbar-btn",title:"Upload "+e,onClick:()=>(function(e){m({visible:!0,type:e})})(e)},c.a.createElement(i,{name:e}))),c.a.createElement(f,{textSize:u,handleChange:e=>s(e,"front","textSize")})),c.a.createElement("div",{className:"create-side-content"},p&&c.a.createElement("div",{className:"side-panel-container"},c.a.createElement("button",{type:"button",className:"btn-icon create-side-panel-btn",onClick:E,title:"Remove attachment"},c.a.createElement(i,{name:"remove"})),c.a.createElement(k,p)),c.a.createElement("textarea",{className:"input create-side-text-input side-text",value:d,style:{fontSize:u+"px"},onChange:e=>s(e,"front","text")})))),o.visible&&c.a.createElement(g,{type:o.type,hide:v,addAttachment:function(e,a){l({type:"ADD_ATTACHMENT",index:t,attachment:{file:e,type:a}}),v()}}))}function y(e){let t=e.index,a=e.handleChange;const s=Object(n.useContext)(h),l=s.state,r=s.dispatch,o=l.cards[t],m=o.back,d=o.id,u=m.type,p=m.text,E=m.textSize,v=m.options,b=m.correct;function N(e,a){r({type:"REMOVE_OPTION",index:t,optionIndex:e,id:a})}function g(e){r({type:"CHANGE_CORRECT_ANSWER",index:t,optionIndex:e})}function k(e){let a=e.target;const n=a.name,c=a.value;c!==m.options[n].text&&r({type:"UPDATE_OPTION_TEXT",optionIndex:parseInt(n,10),index:t,value:c})}function x(e){let a=e.target;const n=a.name,c=a.value,s=a.checked;r({type:"UPDATE_EXACT_ANSWER",name:n,value:"caseSensitive"===n?s:c,index:t})}return c.a.createElement("div",{className:"side-container"},c.a.createElement("div",{className:"create-side-name"},"BACK"),c.a.createElement("div",{className:"side"},c.a.createElement("div",{className:"create-side-toolbar"},c.a.createElement("ul",{className:"create-side-types",onChange:function(e){let a=e.target;r({type:"CHANGE_ANSWER_TYPE",answerType:a.value,index:t})}},c.a.createElement("li",{className:"create-side-type"},c.a.createElement("label",null,c.a.createElement("input",{type:"radio",className:"radio-input",value:"text",name:"type-"+d,defaultChecked:"text"===u}),c.a.createElement(i,{name:"text",title:"Text",className:"create-option-type-icon"}))),c.a.createElement("li",{className:"create-side-type"},c.a.createElement("label",null,c.a.createElement("input",{type:"radio",className:"radio-input",value:"multi",name:"type-"+d,defaultChecked:"multi"===u}),c.a.createElement(i,{name:"list",title:"Multiple choice",className:"create-option-type-icon"}))),c.a.createElement("li",{className:"create-side-type"},c.a.createElement("label",null,c.a.createElement("input",{type:"radio",className:"radio-input",value:"exact",name:"type-"+d,defaultChecked:"exact"===u}),c.a.createElement(i,{name:"text-short",title:"Exact answer",className:"create-option-type-icon"})))),"text"===u&&c.a.createElement(f,{textSize:E,handleChange:e=>a(e,"back","textSize")}),"multi"===u&&c.a.createElement("button",{className:"btn-icon",onClick:function(){r({type:"ADD_OPTION",index:t})},title:"Add option"},c.a.createElement(i,{name:"add-list-item"}))),c.a.createElement("div",{className:"create-side-content"},function(e){return"text"===e?c.a.createElement("textarea",{className:"input create-side-text-input side-text",value:p,style:{fontSize:E+"px"},onChange:e=>a(e,"back","text")}):"exact"===e?c.a.createElement("div",{onChange:x},c.a.createElement("label",{className:"creact-exact-input-container"},c.a.createElement("div",{className:"creact-exact-input-title"},"Provide answer:"),c.a.createElement("input",{type:"text",className:"input creact-exact-input",name:"input",autoComplete:"off",defaultValue:m.input})),c.a.createElement("label",{className:"creact-exact-checkbox-container"},c.a.createElement("input",{type:"checkbox",className:"checkbox-input",name:"caseSensitive",defaultChecked:m.caseSensitive}),c.a.createElement("div",{className:"checkbox creact-exact-checkbox"},c.a.createElement("div",{className:"checkbox-tick"})),c.a.createElement("span",null,"Case sensitive"))):c.a.createElement("ul",null,v.map((e,t)=>{let a=e.text,n=e.id;return c.a.createElement("li",{className:"create-option",key:n},c.a.createElement("label",null,c.a.createElement("input",{type:"radio",className:"radio-input",name:d,checked:b===t,onChange:()=>g(t)}),c.a.createElement("div",{className:"radio create-option-radio",title:"Mark answer as correct"})),c.a.createElement("input",{type:"text",className:"input create-option-input",name:t,defaultValue:a,autoComplete:"off",onChange:k}),c.a.createElement("button",{className:"btn-icon",title:"Remove answer",onClick:()=>N(t,n)},c.a.createElement(i,{name:"remove"})))}))}(u))))}function C(e){let t=e.index,a=e.card;const s=Object(n.useContext)(h),l=s.state,r=s.dispatch;function o(e,n,c){const s=e.target.value;s!==a[n][c]&&r({type:"UPDATE_SIDE_VALUE",index:t,side:n,key:c,value:s})}return c.a.createElement("li",{className:"create-list-item"},c.a.createElement("div",{className:"create-card-index"},t+1,"."),c.a.createElement("div",{className:"create-input-group create-card"},c.a.createElement(x,{index:t,side:a.front,handleChange:o}),c.a.createElement(y,{index:t,handleChange:o})),c.a.createElement("div",{className:"create-card-btns"},l.cards.length>1&&c.a.createElement("button",{className:"btn-icon",title:"Remove card",onClick:function(){r({type:"REMOVE_CARD",index:t})}},c.a.createElement(i,{name:"remove"}))))}function A(e){const t=Object(n.useContext)(h),a=t.state,s=t.dispatch,l=Object(n.useState)(""),r=l[0],i=l[1];let o=0;function d(e){return void 0===e&&(e={}),Object.assign({id:E(),title:"",description:"",cards:[u()]},e)}function u(){return{id:E(),front:{text:"",textSize:16},back:{type:"text",text:"",textSize:16,input:"",correct:0,options:[{id:E()},{id:E()}]}}}function p(e){if("text"===e.type)return e.text.length>0;if("exact"===e.type)return e.input.length>0;return e.options.reduce((e,t)=>{return t.text&&(e+=1),e},0)>1}function v(e){let t=e.target;const a=t.name,n=t.value;s({type:"UPDATE_DECK",name:a,value:n})}return Object(n.useEffect)(()=>(clearTimeout(o),o=setTimeout(()=>{i("")},3200),()=>{clearTimeout(o)}),[r]),Object(n.useEffect)(()=>{const t=e.match.params.id;t&&!e.location.state?m().then(e=>{const a=function(e,t){return e.find(e=>{let a=e.id;return a===t})}(e,t);a&&s({type:"RESET_DECK",deck:a})}):s({type:"RESET_DECK",deck:d(e.location.state)})},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"create-input-group"},c.a.createElement("label",{className:"create-input-label"},c.a.createElement("div",{className:"create-side-name"},"TITLE"),c.a.createElement("input",{className:"input create-title-input",name:"title",value:a.title,onChange:v})),c.a.createElement("label",{className:"create-input-label"},c.a.createElement("div",{className:"create-side-name"},"DESCRIPTION (OPTIONAL)"),c.a.createElement("textarea",{className:"input side-text create-description-input",name:"description",value:a.description,onChange:v}))),c.a.createElement("ul",null,a.cards.map((e,t)=>c.a.createElement(C,{key:e.id,index:t,card:e}))),c.a.createElement("div",{className:"container-footer create-footer"},c.a.createElement("button",{className:"btn",onClick:function(){const e=a.cards[a.cards.length-1],t=u();e&&(t.front.textSize=e.front.textSize,t.back.textSize=e.back.textSize,t.back.type=e.back.type),s({type:"ADD_CARD",card:t})}},"New Card"),r&&c.a.createElement("span",{className:"create-message"},r),c.a.createElement("button",{className:"btn",onClick:function(){if(!a.title)return void i("Title is required");(function(e){let t=0;for(const n of e){const e=n.front,c=n.back;((a=e).text||a.attachment)&&p(c)&&(t+=1)}var a;if(t!==e.length)i("Please fill in both card sides");else{if(!(t<2))return!0;i("Please fill in at least two cards")}})(a.cards)&&(a.cards=a.cards.map(e=>"multi"===e.back.type?(e.back.text="",e.back.input="",e.back.caseSensitive=!1,e.back.options=e.back.options.filter(e=>e.text),e):(e.back.correct=0,e.back.options=e.back.options.slice(0,2).map(e=>(e.text="",e)),"text"===e.back.type?(e.back.input="",e.back.caseSensitive=!1):"exact"===e.back.type&&(e.back.input=e.back.input.trim(),e.back.text=""),e)),e.history.push({pathname:"/decks",state:a}))}},"Create")))}function H(e){return c.a.createElement(v,null,c.a.createElement(A,e))}a(142),a(145);let M=JSON.parse(localStorage.getItem("nimus-cards-settings"))||{studyMode:{value:"standard"},randomize:{value:!0},cardCount:{value:""},timeoutDuration:{value:""}};function L(){return M}function V(e){let t=e.score,a=e.name;const n={width:(t.total?t[a]/t.total*100:50)+"%"};return c.a.createElement("div",{className:"score-bar score-"+a+"-bar",style:n},t[a])}function O(e){let t=e.score,a=e.mode;return c.a.createElement("div",{className:"study-header"},"standard"===a?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"study-score-bar-name-container"},c.a.createElement("span",null,"Right"),c.a.createElement("span",null,"Wrong")),c.a.createElement("div",{className:"study-score-bar-container"},c.a.createElement(V,{score:t,name:"right"}),c.a.createElement(V,{score:t,name:"wrong"}))):c.a.createElement("div",{className:"study-score-table"},c.a.createElement("div",{className:"study-score-table-cell"},c.a.createElement("div",{className:"study-score-table-cell-name"},"Level"),c.a.createElement("div",null,"Cards")),t.levels.map((e,a)=>c.a.createElement("div",{className:"study-score-table-cell"+(t.currentLevel===a?" active":""),key:a},c.a.createElement("div",{className:"study-score-table-cell-name"},4===a?"Learned":a+1),c.a.createElement("div",null,e.length)))))}function S(e){let t=e.score,a=e.mode,n=e.notLastSession,s=e.initNextLevel,r=e.initNextSession;const i=t.session;return c.a.createElement("div",{className:"deck-score-container"},c.a.createElement("h3",{className:"deck-score-title"},"Session Results"),c.a.createElement("div",{className:"deck-score-in-percent"},Math.round(i.right/i.total*100),"%"),c.a.createElement("div",{className:"deck-score-bars"},c.a.createElement("div",{className:"deck-score-bar-container"},c.a.createElement("span",{className:"deck-score-bar-name"},"Right"),c.a.createElement("div",{className:"deck-score-bar"},c.a.createElement(V,{score:i,name:"right"}))),c.a.createElement("div",{className:"deck-score-bar-container"},c.a.createElement("span",{className:"deck-score-bar-name"},"Wrong"),c.a.createElement("div",{className:"deck-score-bar"},c.a.createElement(V,{score:i,name:"wrong"})))),c.a.createElement("div",{className:"deck-score-btn-container"},t.isLast?n&&c.a.createElement("button",{className:"btn deck-score-btn",onClick:r},"Next Session"):c.a.createElement("button",{className:"btn deck-score-btn",onClick:s},"standard"===a?"Next Round":function(){let e=t.currentLevel+1;return t.wrong?e-=e>1?1:0:e+=1,"Continue to Level "+e}()),c.a.createElement(l.b,{to:"/decks",className:"btn"},"Close")))}function w(e){let t=e.side;const a=Object(n.useState)({}),s=a[0],l=s.imageExpanded,r=s.imageSrc,i=a[1],o=t.attachment,m=t.text,d=t.textSize;return c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"side-container"},c.a.createElement("div",{className:"side"},c.a.createElement("div",{className:"study-side-content"},o&&c.a.createElement("div",{className:"side-panel-container"+(m?"":" full"),onClick:function(){const e=o.file;"image"===o.type&&i({imageExpanded:!0,imageSrc:"string"==typeof e?e:URL.createObjectURL(e)})}},c.a.createElement(k,o)),m&&c.a.createElement("div",{className:"side-text study-side-text"},c.a.createElement("div",{style:{fontSize:d+"px"}},m))))),l&&c.a.createElement("div",{className:"mask",onClick:function(){i({imageExpanded:!1})}},c.a.createElement("img",{src:r,className:"study-expaned-image",alt:""})))}function T(e){let t=e.card,a=e.selectOption,n=e.handleChange;const s=t.id,l=t.back,r=t.answerRevealed,o=l.text,m=l.textSize,d=l.type,u=l.options,p=l.correct;return c.a.createElement("div",{className:"side-container"},c.a.createElement("div",{className:"side"},c.a.createElement("div",{className:"study-side-content back"},"text"===d?c.a.createElement("div",{className:"side-text study-side-text"},c.a.createElement("div",{style:{fontSize:m+"px"}},o)):"exact"===d?c.a.createElement("div",{className:"study-exact-container"},c.a.createElement("label",null,c.a.createElement("div",{className:"study-exact-title"},"Your Answer:"),c.a.createElement("input",{type:"input",className:"input study-exact-input",onChange:n,disabled:r})),l.caseSensitive?c.a.createElement("div",{className:"study-exact-notice-container"},c.a.createElement(i,{name:"info"}),c.a.createElement("span",{className:"study-exact-notice"},"Answer is case sensitive")):""):c.a.createElement("ul",{onChange:a,className:"study-options "+(r?"revealed":"")},u.map((e,t)=>{let a=e.text;return c.a.createElement("li",{key:s+t},c.a.createElement("label",{className:"study-option-radio-container "+(r&&p===t?"correct":"")},c.a.createElement("input",{type:"radio",className:"radio-input",name:s,disabled:r,"data-index":t,defaultChecked:0===t}),c.a.createElement("div",{className:"radio study-option-radio"}),c.a.createElement("span",null,a)))})))))}function R(e){let t=e.card,a=e.selectOption,n=e.handleChange;return c.a.createElement("div",{className:"study-card "+t.back.type},"multi"===t.back.type||"exact"===t.back.type?c.a.createElement(c.a.Fragment,null,c.a.createElement(w,{side:t.front}),c.a.createElement(T,{card:t,selectOption:a,handleChange:n})):t.answerRevealed?c.a.createElement(T,{card:t}):c.a.createElement(w,{side:t.front}))}class j extends c.a.Component{constructor(e){super(e),this.state={duration:e.duration},this.timeoutId=0}componentDidMount(){this.runTimer(performance.now(),0)}componentWillUnmount(){clearTimeout(this.timeoutId)}getSeconds(e){const t=e%60;return t<10?"0"+t:t}getMinutes(e){const t=Math.floor(e/60%60);return e>=3600&&t<10?"0"+t:t}getHours(e){return Math.floor(e/3600)}formatDuration(e){const t=this.getSeconds(e),a=this.getMinutes(e),n=this.getHours(e);return(n?n+":":"")+a+":"+t}runTimer(e,t){const a=performance.now()-e-t;this.timeoutId=setTimeout(()=>{this.update(e,t+1e3)},1e3-a)}update(e,t){const a=this.state.duration-1;if(a<1)return this.setState({duration:a}),void this.props.callback();this.setState({duration:a},()=>{this.runTimer(e,t)})}render(){const e=this.formatDuration(this.state.duration);return c.a.createElement("div",{className:"study-timer"},e)}}function D(e,t){return Object.assign({},e,t)}Object(s.render)(c.a.createElement(l.a,null,c.a.createElement(function(){return c.a.createElement("header",{className:"header"},c.a.createElement("nav",{className:"header-nav"},c.a.createElement(l.b,{to:"/",className:"header-logo-link"},c.a.createElement(i,{name:"cards",className:"header-logo-icon"}),c.a.createElement("span",null,"NimusCards")),c.a.createElement("ul",{className:"header-nav-items"},c.a.createElement("li",{className:"header-nav-item"},c.a.createElement(l.c,{to:"/decks",exact:!0,className:"header-link",activeClassName:"active"},"Decks")),c.a.createElement("li",{className:"header-nav-item"},c.a.createElement(l.c,{to:"/decks/create",className:"header-link",activeClassName:"active"},"Create")),c.a.createElement("li",{className:"header-nav-item"},c.a.createElement(l.c,{to:"/settings",className:"header-link",activeClassName:"active"},"Settings")))))},null),c.a.createElement("main",{className:"main"},c.a.createElement(r.c,null,c.a.createElement(r.a,{path:"/",exact:!0,component:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"home-hero"},c.a.createElement("h1",{className:"home-hero-title"},"NimusCards"),c.a.createElement("p",{className:"home-hero-desc"},"Simple learning with flashcards."),c.a.createElement(l.b,{to:"/decks/create",className:"btn home-hero-btn"},"Get Started")),c.a.createElement("h2",{className:"home-features-title"},"Features"),c.a.createElement("ul",{className:"home-features"},c.a.createElement("li",{className:"home-feature"},c.a.createElement(i,{name:"media",className:"home-icon"}),c.a.createElement("h3",{className:"home-feature-title"},"Media-Rich"),c.a.createElement("p",null,"Easily add images and sounds to your flashcards.")),c.a.createElement("li",{className:"home-feature"},c.a.createElement(i,{name:"responsive",className:"home-icon"}),c.a.createElement("h3",{className:"home-feature-title"},"Responsive"),c.a.createElement("p",null,"Responsive web design makes user experience consistent across multiple devices.")),c.a.createElement("li",{className:"home-feature"},c.a.createElement(i,{name:"offline",className:"home-icon"}),c.a.createElement("h3",{className:"home-feature-title"},"Works Offline"),c.a.createElement("p",null,"Even without connection, you can still use NimusCards."))))}}),c.a.createElement(r.a,{path:"/decks",exact:!0,component:function(e){const t=Object(n.useState)([]),a=t[0],s=t[1],r=Object(n.useState)({visible:!1}),i=r[0],p=r[1],E=Object(n.useState)(!0),h=E[0],v=E[1];function b(e,t){return e.findIndex(e=>e.id===t)}function f(t){e.history.push({pathname:"/decks/"+t.id+"/edit",state:t})}function N(e){p({visible:!0,deck:e})}function g(){p({visible:!1,deck:null})}return Object(n.useEffect)(()=>{(async function(e){const t=await m();if(e){const n=b(t,e.id);-1===n?t.push(e):t.splice(n,1,e),a=e,o.decks.put(a).catch(e=>{console.log(e)})}var a;return t})(e.location.state).then(e=>{s(e),v(!1)})},[]),c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"component-header deck-list-header"},c.a.createElement("h1",{className:"deck-list-title"},"Your Decks"),c.a.createElement(l.b,{to:"/decks/create",className:"btn deck-list-btn"},"Create")),h?"":a.length?c.a.createElement("ul",null,function(e){return e.map(e=>c.a.createElement(u,{key:e.id,deck:e,showDialog:N,editDeck:f}))}(a)):c.a.createElement("h2",{className:"deck-list-message"},"You have no decks"),i.visible&&c.a.createElement(d,{deckTitle:i.deck.title,removeDeck:function(){const e=b(a,i.deck.id);var t;a.splice(e,1),s([...a]),t=i.deck._id,o.decks.delete(t).catch(e=>{console.log(e)}),g()},cancelRemoval:g}))}}),c.a.createElement(r.a,{path:"/decks/create",component:H,key:"create"}),c.a.createElement(r.a,{path:"/decks/:id",exact:!0,component:function(e){const t=Object(n.useReducer)(D,{cards:[],initialSessionCards:[]}),a=t[0],s=t[1],l=a.cards,r=a.card,i=a.score,o=a.initialSessionCards,d=L();function u(e){const t=h({currentLevel:0,session:h()});if("standard"===d.studyMode.value)t.incorrectIds=[];else{const a=e.map(e=>e.id);t.levels=[a,[],[],[],[]]}return t}function E(e,t){void 0===t&&(t=0);const a=e[t];return{index:t,id:a.id,front:a.front,back:a.back,answerRevealed:!1}}function h(e){return void 0===e&&(e={}),Object.assign({},e,{right:0,wrong:0,total:0})}function v(e,t){e?t.right+=1:t.wrong+=1,t.total=t.right+t.wrong}function b(e){return v(e,i),v(e,i.session),"standard"===d.studyMode.value?function(e,t){return e||t.incorrectIds.push(r.id),t.isLast=t.right===t.total,t}(e,i):function(e,t){let a=t.currentLevel;if(e)a+=1;else{if(!a)return t;a-=1}const n=t.levels[t.currentLevel],c=n.findIndex(e=>e===r.id),s=n.splice(c,1)[0];return t.levels[a].push(s),t.isLast=t.levels[4].length===o.length,t}(e,i)}function f(e,t){return e.filter(e=>t.includes(e.id))}function N(e){const t=d.randomize.value?p(e):e;s({score:h(i),card:E(t),cards:t,wasLastCard:!1})}function g(){const e={};if(r.answerRevealed=!0,"multi"===r.back.type)e.score=b(r.back.correct===a.selectedOption),e.selectedOption=0;else if("exact"===r.back.type){const t=a.answer;let n=!1;n=r.back.caseSensitive?t===r.back.input:t.toLowerCase()===r.back.input.toLowerCase(),e.score=b(n)}s(Object.assign({card:r},e))}function k(e){const t=r.index+1,n=t===l.length;let c=null,o=i,m=a.currentSession;"boolean"==typeof e&&(o=b(e)),n?o.isLast&&(m+=1):c=E(l,t),s({wasLastCard:n,currentSession:m,score:o,card:c})}return Object(n.useEffect)(()=>{m().then(t=>{const a=e.match.params.id,n=t.find(e=>e.id===a);n?function(e){let t=e.title,a=e.cards;const n=d.cardCount.value,c=d.randomize.value?p(a):a;let l=c,r=-1;n&&(r=Math.ceil(a.length/n),l=c.slice(0,n)),s({currentSession:0,numberOfSessions:r,title:t,initialCards:c,initialSessionCards:l,cards:[...l],card:E(l),score:u(l)})}(n):e.history.replace("/decks")})},[]),l.length?c.a.createElement(n.Fragment,null,c.a.createElement("h1",{className:"component-header study-deck-title"},c.a.createElement("div",{className:"study-progress",style:{transform:"scaleX("+(r?r.index/l.length:1)+")"}}),c.a.createElement("span",null,a.title)),a.wasLastCard?c.a.createElement(S,{score:i,mode:d.studyMode.value,initNextLevel:function(){"standard"===d.studyMode.value?function(){const e=f(l,i.incorrectIds);i.currentLevel+=1,i.incorrectIds.length=0,N(e)}():function(){const e=i.levels,t=e.findIndex(e=>e.length),a=f(o,e[t]);i.currentLevel=t,N(a)}()},notLastSession:a.numberOfSessions-a.currentSession>0,initNextSession:function(){const e=d.cardCount.value,t=e*a.currentSession;N(a.initialCards.slice(t,t+e))}}):c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"study-container"},c.a.createElement(O,{score:i,mode:d.studyMode.value}),c.a.createElement(R,{card:r,selectOption:function(e){let t=e.target;s({selectedOption:parseInt(t.getAttribute("data-index"),10)})},handleChange:function(e){let t=e.target;s({answer:t.value})}})),c.a.createElement("div",{className:"container-footer study-footer"},r.answerRevealed?"text"===r.back.type?c.a.createElement(n.Fragment,null,c.a.createElement("button",{className:"btn-danger study-footer-btn",onClick:()=>k(!1)},"I Was Wrong"),c.a.createElement("button",{className:"btn-success study-footer-btn",onClick:()=>k(!0)},"I Got It Right")):c.a.createElement("button",{className:"btn",onClick:k},"Next"):c.a.createElement(n.Fragment,null,d.timeoutDuration.value>0&&c.a.createElement(j,{duration:d.timeoutDuration.value,callback:g}),c.a.createElement("button",{className:"btn",onClick:g},"Reveal"))))):null}}),c.a.createElement(r.a,{path:"/decks/:id/edit",component:H,key:"edit"}),c.a.createElement(r.a,{path:"/settings",component:function(){const e=Object(n.useState)(L()),t=e[0],a=e[1];return Object(n.useEffect)(()=>{!function(e){M=Object.assign({},M,e),localStorage.setItem("nimus-cards-settings",JSON.stringify(M))}(t)},[t]),c.a.createElement("div",{onChange:function(e){let n=e.target;const c=n.getAttribute("data-name"),s=t[c];switch(n.type){case"checkbox":s.value=n.checked;break;case"text":s.value=n.validity.valid&&parseInt(n.value,10)||0;break;case"radio":s.value=n.getAttribute("data-study-mode")}a(Object.assign({},t,{[c]:s}))}},c.a.createElement("div",{className:"settings-item"},c.a.createElement("div",{className:"settings-item-title"},"Study mode"),c.a.createElement("label",{className:"settings-label settings-radio-label"},c.a.createElement("input",{type:"radio",name:"study-mode",className:"radio-input","data-name":"studyMode","data-study-mode":"standard",defaultChecked:"standard"===t.studyMode.value}),c.a.createElement("div",{className:"radio settings-radio"}),c.a.createElement("span",null,"Standard")),c.a.createElement("label",{className:"settings-label settings-radio-label"},c.a.createElement("input",{type:"radio",name:"study-mode",className:"radio-input","data-name":"studyMode","data-study-mode":"leitner",defaultChecked:"leitner"===t.studyMode.value}),c.a.createElement("div",{className:"radio settings-radio"}),c.a.createElement("span",null,"Leitner system"))),c.a.createElement("label",{className:"settings-item settings-label"},c.a.createElement("input",{type:"checkbox",className:"checkbox-input","data-name":"randomize",defaultChecked:t.randomize.value}),c.a.createElement("div",{className:"checkbox settings-checkbox"},c.a.createElement("div",{className:"checkbox-tick"})),c.a.createElement("span",null,"Randomize cards")),c.a.createElement("label",{className:"settings-item"},c.a.createElement("span",null,"Use"),c.a.createElement("input",{type:"text",className:"input settings-input","data-name":"cardCount",pattern:"^[0-9]+$",defaultValue:t.cardCount.value}),c.a.createElement("span",null,"cards per study session"),c.a.createElement("div",{className:"settings-message"},"Please provide a valid whole number.")),c.a.createElement("label",{className:"settings-item"},c.a.createElement("span",null,"Reveal answer after"),c.a.createElement("input",{type:"text",className:"input settings-input","data-name":"timeoutDuration",pattern:"^0*|0*([5-9][0-9]*|[1-9]+[0-9]+)$",defaultValue:t.timeoutDuration.value}),c.a.createElement("span",null,"seconds"),c.a.createElement("div",{className:"settings-message"},"Please provide a valid whole number.",c.a.createElement("br",null)," Minimal accepted value is 5 seconds.")))}}),c.a.createElement(r.a,{component:function(){return c.a.createElement("p",{className:"no-match-message"},"This page isn't available")}})),c.a.createElement(class extends c.a.Component{constructor(e){super(e),this.state={visible:!1,message:""}}componentDidMount(){window.addEventListener("sw-state-change",e=>{let t=e.detail;"init"===t?this.showPopup("Content is cached for offline use."):"update"===t&&this.showPopup("Update is available, please refresh.")})}showPopup(e){this.setState({visible:!0,message:e}),setTimeout(()=>{this.setState({visible:!1})},6e3)}render(){return c.a.createElement("div",{className:"service-worker-popup"+(this.state.visible?" visible":"")},c.a.createElement("p",{className:"service-worker-popup-message"},this.state.message))}},null))),document.getElementById("app")),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").then(e=>{e.onupdatefound=(()=>{const t=e.installing;t.onstatechange=(()=>{"installed"===t.state&&function(e,t){void 0===t&&(t=null);const a=new CustomEvent(e,{detail:t});window.dispatchEvent(a)}("sw-state-change",navigator.serviceWorker.controller?"update":"init")})})}).catch(console.log)})},93:function(e,t,a){},94:function(e,t,a){}});