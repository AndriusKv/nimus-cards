(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{102:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return c});const a=new(n(105).a)("nimus-cards-decks");function r(){return a.decks.toArray().catch(e=>{console.log(e)})}function s(e){a.decks.put(e).catch(e=>{console.log(e)})}function c(e){a.decks.delete(e).catch(e=>{console.log(e)})}a.version(1).stores({decks:"++_id"})},104:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r});n(127);function a(e){const t=[].concat(e);let n=t.length;for(;n;){const e=Math.floor(Math.random()*n);n-=1;var a=[t[e],t[n]];t[n]=a[0],t[e]=a[1]}return t}function r(){return Math.random().toString(32).slice(2,10)}},112:function(e,t,n){"use strict";n.d(t,"a",function(){return s});n(101),n(113);var a=n(0),r=n.n(a);function s(e){let t=e.file,n=e.type;const a="string"==typeof t?t:URL.createObjectURL(t);return"image"===n?r.a.createElement("img",{src:a,alt:"",className:"side-image"}):"audio"===n?r.a.createElement("audio",{src:a,className:"side-audio",controls:!0}):null}},114:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return s});let a=JSON.parse(localStorage.getItem("nimus-cards-settings"))||{studyMode:{value:"standard"},randomize:{value:!0},cardCount:{value:""},timeoutDuration:{value:""}};function r(){return a}function s(e){a=Object.assign({},a,e),localStorage.setItem("nimus-cards-settings",JSON.stringify(a))}},148:function(e,t,n){"use strict";var a=n(149),r=n(150)("includes");n(52)({target:"String",proto:!0,forced:!r},{includes:function(e){return!!~a(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},149:function(e,t,n){var a=n(128),r=n(53);e.exports=function(e,t,n){if(a(t))throw TypeError("String.prototype."+n+" doesn't accept regex");return String(r(e))}},150:function(e,t,n){var a=n(7)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,"/./"[e](t)}catch(e){}}return!1}},151:function(e,t,n){"use strict";var a=n(9),r=n(103),s=n(29),c=n(33),i=n(53),o=n(107),l=n(109),u=Math.max,d=Math.min,m=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,f=/\$([$&'`]|\d\d?)/g;n(111)("replace",2,function(e,t,n){return[function(n,a){var r=i(this),s=null==n?void 0:n[e];return void 0!==s?s.call(n,r,a):t.call(String(r),n,a)},function(e,r){var i=n(t,e,this,r);if(i.done)return i.value;var m=a(e),v=String(this),f="function"==typeof r;f||(r=String(r));var h=m.global;if(h){var b=m.unicode;m.lastIndex=0}for(var p=[];;){var E=l(m,v);if(null===E)break;if(p.push(E),!h)break;""===String(E[0])&&(m.lastIndex=o(v,s(m.lastIndex),b))}for(var y,N="",k=0,x=0;x<p.length;x++){E=p[x];for(var S=String(E[0]),w=u(d(c(E.index),v.length),0),C=[],L=1;L<E.length;L++)C.push(void 0===(y=E[L])?y:String(y));var O=E.groups;if(f){var M=[S].concat(C,w,v);void 0!==O&&M.push(O);var I=String(r.apply(void 0,M))}else I=g(S,v,w,C,O,r);w>=k&&(N+=v.slice(k,w)+I,k=w+S.length)}return N+v.slice(k)}];function g(e,n,a,s,c,i){var o=a+e.length,l=s.length,u=f;return void 0!==c&&(c=r(c),u=v),t.call(i,u,function(t,r){var i;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,a);case"'":return n.slice(o);case"<":i=c[r.slice(1,-1)];break;default:var u=+r;if(0===u)return t;if(u>l){var d=m(u/10);return 0===d?t:d<=l?void 0===s[d-1]?r.charAt(1):s[d-1]+r.charAt(1):t}i=s[u-1]}return void 0===i?"":i})}})},153:function(e,t,n){"use strict";n.r(t);n(148),n(123),n(151),n(101);var a=n(0),r=n.n(a),s=n(104),c=n(102),i=n(114);function o(e){let t=e.score,n=e.name;const a={width:(t.total?t[n]/t.total*100:50)+"%"};return r.a.createElement("div",{className:"score-bar score-"+n+"-bar",style:a},t[n])}function l(e){let t=e.score,n=e.mode;return r.a.createElement("div",{className:"study-header"},"standard"===n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"study-score-bar-name-container"},r.a.createElement("span",null,"Right"),r.a.createElement("span",null,"Wrong")),r.a.createElement("div",{className:"study-score-bar-container"},r.a.createElement(o,{score:t,name:"right"}),r.a.createElement(o,{score:t,name:"wrong"}))):r.a.createElement("div",{className:"study-score-table"},r.a.createElement("div",{className:"study-score-table-cell"},r.a.createElement("div",{className:"study-score-table-cell-name"},"Level"),r.a.createElement("div",null,"Cards")),t.levels.map((e,n)=>r.a.createElement("div",{className:"study-score-table-cell"+(t.currentLevel===n?" active":""),key:n},r.a.createElement("div",{className:"study-score-table-cell-name"},4===n?"Learned":n+1),r.a.createElement("div",null,e.length)))))}var u=n(6);function d(e){let t=e.score,n=e.mode,a=e.notLastSession,s=e.initNextLevel,c=e.initNextSession;const i=t.session;return r.a.createElement("div",{className:"deck-score-container"},r.a.createElement("h3",{className:"deck-score-title"},"Session Results"),r.a.createElement("div",{className:"deck-score-in-percent"},Math.round(i.right/i.total*100),"%"),r.a.createElement("div",{className:"deck-score-bars"},r.a.createElement("div",{className:"deck-score-bar-container"},r.a.createElement("span",{className:"deck-score-bar-name"},"Right"),r.a.createElement("div",{className:"deck-score-bar"},r.a.createElement(o,{score:i,name:"right"}))),r.a.createElement("div",{className:"deck-score-bar-container"},r.a.createElement("span",{className:"deck-score-bar-name"},"Wrong"),r.a.createElement("div",{className:"deck-score-bar"},r.a.createElement(o,{score:i,name:"wrong"})))),r.a.createElement("div",{className:"deck-score-btn-container"},t.isLast?a&&r.a.createElement("button",{className:"btn deck-score-btn",onClick:c},"Next Session"):r.a.createElement("button",{className:"btn deck-score-btn",onClick:s},"standard"===n?"Next Round":function(){let e=t.currentLevel+1;return t.wrong?e-=e>1?1:0:e+=1,"Continue to Level "+e}()),r.a.createElement(u.b,{to:"/decks",className:"btn"},"Close")))}n(113);var m=n(112);function v(e){let t=e.side;const n=Object(a.useState)({}),s=n[0],c=s.imageExpanded,i=s.imageSrc,o=n[1],l=t.attachment,u=t.text,d=t.textSize;return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"study-card-content"},l&&r.a.createElement("div",{className:"study-side-panel"+(u?"":" full"),onClick:function(){const e=l.file;"image"===l.type&&o({imageExpanded:!0,imageSrc:"string"==typeof e?e:URL.createObjectURL(e)})}},r.a.createElement(m.a,l)),u&&r.a.createElement("div",{className:"study-side-text"},r.a.createElement("div",{className:"study-side-text-inner",style:{fontSize:d+"px"}},u))),c&&r.a.createElement("div",{className:"mask",onClick:function(){o({imageExpanded:!1})}},r.a.createElement("img",{src:i,className:"study-expaned-image",alt:""})))}var f=n(13);function g(e){let t=e.card,n=e.selectOption,a=e.handleChange;const s=t.id,c=t.back,i=t.answerRevealed,o=c.text,l=c.textSize,u=c.type,d=c.options,m=c.correct;return r.a.createElement("div",{className:"study-card-content"},"text"===u?r.a.createElement("div",{className:"study-side-text"},r.a.createElement("div",{className:"study-side-text-inner",style:{fontSize:l+"px"}},o)):"exact"===u?r.a.createElement("div",{className:"study-exact-container"},r.a.createElement("label",null,r.a.createElement("div",{className:"study-exact-title"},"Your Answer:"),r.a.createElement("input",{type:"input",className:"input study-exact-input",onChange:a,disabled:i})),c.caseSensitive?r.a.createElement("div",{className:"study-exact-notice-container"},r.a.createElement(f.a,{name:"info"}),r.a.createElement("span",{className:"study-exact-notice"},"Answer is case sensitive")):""):r.a.createElement("ul",{onChange:n,className:"study-options"+(i?" revealed":"")},d.map((e,t)=>{let n=e.text;return r.a.createElement("li",{key:s+t},r.a.createElement("label",{className:"study-option-radio-container "+(i&&m===t?"correct":"")},r.a.createElement("input",{type:"radio",className:"radio-input",name:s,disabled:i,"data-index":t,defaultChecked:0===t}),r.a.createElement("div",{className:"radio study-option-radio"}),r.a.createElement("span",null,n)))})))}function h(e){let t=e.notes,n=e.toggleNotes;return t&&t.value?r.a.createElement("div",{className:"study-notes-container"},r.a.createElement("button",{className:"btn btn-text study-notes-toggle-btn",onClick:n},"Notes"),t.visible&&r.a.createElement("div",{className:"study-card-content study-notes"},t.value)):null}function b(e){let t=e.card,n=e.selectOption,a=e.toggleNotes,s=e.handleChange;return r.a.createElement("div",{className:"study-card "+("text"===t.back.type?"one":"two")},"text"===t.back.type?t.answerRevealed?r.a.createElement(g,{card:t}):r.a.createElement(v,{side:t.front}):r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{side:t.front}),r.a.createElement(g,{card:t,selectOption:n,handleChange:s})),r.a.createElement(h,{notes:t.notes,toggleNotes:a}))}class p extends r.a.Component{constructor(e){super(e),this.state={duration:e.duration},this.timeoutId=0}componentDidMount(){this.runTimer(performance.now(),0)}componentWillUnmount(){clearTimeout(this.timeoutId)}getSeconds(e){const t=e%60;return t<10?"0"+t:t}getMinutes(e){const t=Math.floor(e/60%60);return e>=3600&&t<10?"0"+t:t}getHours(e){return Math.floor(e/3600)}formatDuration(e){const t=this.getSeconds(e),n=this.getMinutes(e),a=this.getHours(e);return(a?a+":":"")+n+":"+t}runTimer(e,t){const n=performance.now()-e-t;this.timeoutId=setTimeout(()=>{this.update(e,t+1e3)},1e3-n)}update(e,t){const n=this.state.duration-1;if(n<1)return this.setState({duration:n}),void this.props.callback();this.setState({duration:n},()=>{this.runTimer(e,t)})}render(){const e=this.formatDuration(this.state.duration);return r.a.createElement("div",{className:"study-timer"},e)}}function E(e,t){return Object.assign({},e,t)}function y(e){const t=Object(a.useReducer)(E,{cards:[],initialSessionCards:[]}),n=t[0],o=t[1],u=n.cards,m=n.card,v=n.score,f=n.initialSessionCards,g=Object(i.a)();function h(e){const t=N({currentLevel:0,session:N()});if("standard"===g.studyMode.value)t.incorrectIds=[];else{const n=e.map(e=>e.id);t.levels=[n,[],[],[],[]]}return t}function y(e,t){void 0===t&&(t=0);const n=e[t];return Object.assign({},n,{index:t,answerRevealed:!1,notes:Object.assign({},n.notes,{visible:!1})})}function N(e){return void 0===e&&(e={}),Object.assign({},e,{right:0,wrong:0,total:0})}function k(e,t){e?t.right+=1:t.wrong+=1,t.total=t.right+t.wrong}function x(e){return k(e,v),k(e,v.session),"standard"===g.studyMode.value?function(e,t){return e||t.incorrectIds.push(m.id),t.isLast=t.right===t.total,t}(e,v):function(e,t){let n=t.currentLevel;if(e)n+=1;else{if(!n)return t;n-=1}const a=t.levels[t.currentLevel],r=a.findIndex(e=>e===m.id),s=a.splice(r,1)[0];return t.levels[n].push(s),t.isLast=t.levels[4].length===f.length,t}(e,v)}function S(e,t){return e.filter(e=>t.includes(e.id))}function w(e){const t=g.randomize.value?Object(s.b)(e):e;o({score:N(v),card:y(t),cards:t,wasLastCard:!1})}function C(){const e={};if(m.answerRevealed=!0,"multi"===m.back.type)e.score=x(m.back.correct===n.selectedOption),e.selectedOption=0;else if("exact"===m.back.type){const t=n.answer,a=void 0===t?"":t;let r=!1;r=m.back.caseSensitive?a===m.back.input:a.toLowerCase()===m.back.input.toLowerCase(),e.score=x(r)}o(Object.assign({card:m},e))}function L(e){const t=m.index+1,a=t===u.length;let r=null,s=v,c=n.currentSession;"boolean"==typeof e&&(s=x(e)),a?s.isLast&&(c+=1):r=y(u,t),o({wasLastCard:a,currentSession:c,score:s,card:r})}return Object(a.useEffect)(()=>{Object(c.b)().then(t=>{const n=e.match.params.id,a=t.find(e=>e.id===n);a?function(e){let t=e.title,n=e.cards;const a=g.cardCount.value,r=g.randomize.value?Object(s.b)(n):n;let c=r,i=-1;a&&(i=Math.ceil(n.length/a),c=r.slice(0,a));o({currentSession:0,numberOfSessions:i,title:t,initialCards:r,initialSessionCards:c,cards:[...c],card:y(c),score:h(c)})}(a):e.history.replace("/decks")})},[]),u.length?r.a.createElement(a.Fragment,null,r.a.createElement("h1",{className:"component-header study-deck-title"},r.a.createElement("div",{className:"study-progress",style:{transform:"scaleX("+(m?m.index/u.length:1)+")"}}),r.a.createElement("span",null,n.title)),n.wasLastCard?r.a.createElement(d,{score:v,mode:g.studyMode.value,initNextLevel:function(){"standard"===g.studyMode.value?function(){const e=S(u,v.incorrectIds);v.currentLevel+=1,v.incorrectIds.length=0,w(e)}():function(){const e=v.levels,t=e.findIndex(e=>e.length),n=S(f,e[t]);v.currentLevel=t,w(n)}()},notLastSession:n.numberOfSessions-n.currentSession>0,initNextSession:function(){const e=g.cardCount.value,t=e*n.currentSession;w(n.initialCards.slice(t,t+e))}}):r.a.createElement(a.Fragment,null,r.a.createElement(l,{score:v,mode:g.studyMode.value}),r.a.createElement(b,{card:m,handleChange:function(e){let t=e.target;o({answer:t.value})},selectOption:function(e){let t=e.target;o({selectedOption:parseInt(t.getAttribute("data-index"),10)})},toggleNotes:function(){m.notes.visible=!m.notes.visible,o({card:m})}}),r.a.createElement("div",{className:"container-footer study-footer"},m.answerRevealed?"text"===m.back.type?r.a.createElement(a.Fragment,null,r.a.createElement("button",{className:"btn btn-danger study-footer-btn",onClick:()=>L(!1)},"I Was Wrong"),r.a.createElement("button",{className:"btn btn-success study-footer-btn",onClick:()=>L(!0)},"I Got It Right")):r.a.createElement("button",{className:"btn",onClick:L},"Next"):r.a.createElement(a.Fragment,null,g.timeoutDuration.value>0&&r.a.createElement(p,{duration:g.timeoutDuration.value,callback:C}),r.a.createElement("button",{className:"btn",onClick:C},"Reveal"))))):null}n.d(t,"default",function(){return y})}}]);