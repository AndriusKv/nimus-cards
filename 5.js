(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{111:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return c}));const a=new(n(124).a)("nimus-cards-decks");function r(){return a.decks.toArray().catch(e=>{console.log(e)})}function s(e){a.decks.put(e).catch(e=>{console.log(e)})}function c(e){a.decks.delete(e).catch(e=>{console.log(e)})}a.version(1).stores({decks:"++_id"})},118:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));n(135),n(104);function a(e){const t=[].concat(e);let n=t.length;for(;n;){const e=Math.floor(Math.random()*n);n-=1,[t[n],t[e]]=[t[e],t[n]]}return t}function r(){return Math.random().toString(32).slice(2,10)}},130:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(104),n(131);var a=n(0),r=n.n(a);function s({file:e,type:t}){const n="string"==typeof e?e:URL.createObjectURL(e);return"image"===t?r.a.createElement("img",{src:n,alt:"",className:"side-image"}):"audio"===t?r.a.createElement("audio",{src:n,className:"side-audio",controls:!0}):null}},132:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));n(106);let a=JSON.parse(localStorage.getItem("nimus-cards-settings"))||{studyMode:{value:"standard"},randomize:{value:!0},cardCount:{value:""},timeoutDuration:{value:""}};function r(){return a}function s(e){a=Object.assign({},a,{},e),localStorage.setItem("nimus-cards-settings",JSON.stringify(a))}},150:function(e,t,n){"use strict";var a=n(56),r=n(151),s=n(57);a({target:"String",proto:!0,forced:!n(152)("includes")},{includes:function(e){return!!~String(s(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},151:function(e,t,n){var a=n(136);e.exports=function(e){if(a(e))throw TypeError("The method doesn't accept regular expressions");return e}},152:function(e,t,n){var a=n(6)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,"/./"[e](t)}catch(e){}}return!1}},153:function(e,t,n){"use strict";var a=n(126),r=n(11),s=n(105),c=n(34),i=n(38),o=n(57),l=n(127),u=n(129),d=Math.max,m=Math.min,f=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g;a("replace",2,(function(e,t,n,a){var E=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,h=a.REPLACE_KEEPS_$0,b=E?"$":"$0";return[function(n,a){var r=o(this),s=null==n?void 0:n[e];return void 0!==s?s.call(n,r,a):t.call(String(r),n,a)},function(e,a){if(!E&&h||"string"==typeof a&&-1===a.indexOf(b)){var s=n(t,e,this,a);if(s.done)return s.value}var o=r(e),f=String(this),v="function"==typeof a;v||(a=String(a));var g=o.global;if(g){var N=o.unicode;o.lastIndex=0}for(var y=[];;){var k=u(o,f);if(null===k)break;if(y.push(k),!g)break;""===String(k[0])&&(o.lastIndex=l(f,c(o.lastIndex),N))}for(var x,S="",C=0,w=0;w<y.length;w++){k=y[w];for(var L=String(k[0]),O=d(m(i(k.index),f.length),0),$=[],I=1;I<k.length;I++)$.push(void 0===(x=k[I])?x:String(x));var R=k.groups;if(v){var M=[L].concat($,O,f);void 0!==R&&M.push(R);var j=String(a.apply(void 0,M))}else j=p(L,f,O,$,R,a);O>=C&&(S+=f.slice(C,O)+j,C=O+L.length)}return S+f.slice(C)}];function p(e,n,a,r,c,i){var o=a+e.length,l=r.length,u=g;return void 0!==c&&(c=s(c),u=v),t.call(i,u,(function(t,s){var i;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,a);case"'":return n.slice(o);case"<":i=c[s.slice(1,-1)];break;default:var u=+s;if(0===u)return t;if(u>l){var d=f(u/10);return 0===d?t:d<=l?void 0===r[d-1]?s.charAt(1):r[d-1]+s.charAt(1):t}i=r[u-1]}return void 0===i?"":i}))}}))},155:function(e,t,n){"use strict";n.r(t);n(106),n(150),n(133),n(153),n(104);var a=n(0),r=n.n(a),s=n(118),c=n(111),i=n(132);function o({score:e,name:t}){const n={width:`${e.total?e[t]/e.total*100:50}%`};return r.a.createElement("div",{className:`score-bar score-${t}-bar`,style:n},e[t])}function l({score:e,mode:t}){return r.a.createElement("div",{className:"study-header"},"standard"===t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"study-score-bar-name-container"},r.a.createElement("span",null,"Right"),r.a.createElement("span",null,"Wrong")),r.a.createElement("div",{className:"study-score-bar-container"},r.a.createElement(o,{score:e,name:"right"}),r.a.createElement(o,{score:e,name:"wrong"}))):r.a.createElement("div",{className:"study-score-table"},r.a.createElement("div",{className:"study-score-table-cell"},r.a.createElement("div",{className:"study-score-table-cell-name"},"Level"),r.a.createElement("div",null,"Cards")),e.levels.map((t,n)=>r.a.createElement("div",{className:`study-score-table-cell${e.currentLevel===n?" active":""}`,key:n},r.a.createElement("div",{className:"study-score-table-cell-name"},4===n?"Learned":n+1),r.a.createElement("div",null,t.length)))))}var u=n(7);function d({score:e,mode:t,notLastSession:n,initNextLevel:a,initNextSession:s}){const{session:c}=e;return r.a.createElement("div",{className:"deck-score-container"},r.a.createElement("h3",{className:"deck-score-title"},"Session Results"),r.a.createElement("div",{className:"deck-score-in-percent"},Math.round(c.right/c.total*100),"%"),r.a.createElement("div",{className:"deck-score-bars"},r.a.createElement("div",{className:"deck-score-bar-container"},r.a.createElement("span",{className:"deck-score-bar-name"},"Right"),r.a.createElement("div",{className:"deck-score-bar"},r.a.createElement(o,{score:c,name:"right"}))),r.a.createElement("div",{className:"deck-score-bar-container"},r.a.createElement("span",{className:"deck-score-bar-name"},"Wrong"),r.a.createElement("div",{className:"deck-score-bar"},r.a.createElement(o,{score:c,name:"wrong"})))),r.a.createElement("div",{className:"deck-score-btn-container"},e.isLast?n&&r.a.createElement("button",{className:"btn deck-score-btn",onClick:s},"Next Session"):r.a.createElement("button",{className:"btn deck-score-btn",onClick:a},"standard"===t?"Next Round":function(){let t=e.currentLevel+1;return e.wrong?t-=t>1?1:0:t+=1,`Continue to Level ${t}`}()),r.a.createElement(u.b,{to:"/decks",className:"btn"},"Close")))}n(131);var m=n(130);function f({side:e}){const[{imageExpanded:t,imageSrc:n},s]=Object(a.useState)({}),{attachment:c,text:i,textSize:o}=e;return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"study-card-content"},c&&r.a.createElement("div",{className:`study-side-panel${i?"":" full"}`,onClick:function(){const{file:e,type:t}=c;"image"===t&&s({imageExpanded:!0,imageSrc:"string"==typeof e?e:URL.createObjectURL(e)})}},r.a.createElement(m.a,c)),i&&r.a.createElement("div",{className:"study-side-text"},r.a.createElement("div",{className:"study-side-text-inner",style:{fontSize:`${o}px`}},i))),t&&r.a.createElement("div",{className:"mask",onClick:function(){s({imageExpanded:!1})}},r.a.createElement("img",{src:n,className:"study-expaned-image",alt:""})))}var v=n(14);function g({card:e,selectOption:t,handleChange:n}){const{id:a,back:s,answerRevealed:c}=e,{text:i,textSize:o,type:l,options:u,correct:d}=s;return r.a.createElement("div",{className:"study-card-content"},"text"===l?r.a.createElement("div",{className:"study-side-text"},r.a.createElement("div",{className:"study-side-text-inner",style:{fontSize:`${o}px`}},i)):"exact"===l?r.a.createElement("div",{className:"study-exact-container"},r.a.createElement("label",null,r.a.createElement("div",{className:"study-exact-title"},"Your Answer:"),r.a.createElement("input",{type:"input",className:"input study-exact-input",onChange:n,disabled:c})),s.caseSensitive?r.a.createElement("div",{className:"study-exact-notice-container"},r.a.createElement(v.a,{name:"info"}),r.a.createElement("span",{className:"study-exact-notice"},"Answer is case sensitive")):""):"multi"===l?r.a.createElement("ul",{onChange:t,className:`study-options${s.useGrid?" grid":""}${c?" revealed":""}`},u.map(({text:e},t)=>r.a.createElement("li",{key:a+t},r.a.createElement("label",{className:`study-option-radio-container${c&&d===t?" correct":""}${s.selectedOption===t?" selected":""}`},r.a.createElement("input",{type:"radio",className:"radio-input",name:a,disabled:c,"data-index":t,defaultChecked:0===t}),r.a.createElement("div",{className:"radio study-option-radio"}),r.a.createElement("span",null,e))))):null)}function E({notes:e,toggleNotes:t}){return e&&e.value?r.a.createElement("div",{className:"study-notes-container"},r.a.createElement("button",{className:"btn btn-text study-notes-toggle-btn",onClick:t},"Notes"),e.visible&&r.a.createElement("div",{className:"study-card-content study-notes"},e.value)):null}function h({card:e,selectOption:t,toggleNotes:n,handleChange:a}){return r.a.createElement("div",{className:`study-card ${"text"===e.back.type?"one":"two"}`},"text"===e.back.type?e.answerRevealed?r.a.createElement(g,{card:e}):r.a.createElement(f,{side:e.front}):r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{side:e.front}),r.a.createElement(g,{card:e,selectOption:t,handleChange:a})),r.a.createElement(E,{notes:e.notes,toggleNotes:n}))}class b extends r.a.Component{constructor(e){super(e),this.state={duration:e.duration},this.timeoutId=0}componentDidMount(){this.runTimer(performance.now(),0)}componentWillUnmount(){clearTimeout(this.timeoutId)}getSeconds(e){const t=e%60;return t<10?`0${t}`:t}getMinutes(e){const t=Math.floor(e/60%60);return e>=3600&&t<10?`0${t}`:t}getHours(e){return Math.floor(e/3600)}formatDuration(e){const t=this.getSeconds(e),n=this.getMinutes(e),a=this.getHours(e);return`${a?`${a}:`:""}${n}:${t}`}runTimer(e,t){const n=performance.now()-e-t;this.timeoutId=setTimeout(()=>{this.update(e,t+1e3)},1e3-n)}update(e,t){const n=this.state.duration-1;if(n<1)return this.setState({duration:n}),void this.props.callback();this.setState({duration:n},()=>{this.runTimer(e,t)})}render(){const e=this.formatDuration(this.state.duration);return r.a.createElement("div",{className:"study-timer"},e)}}function p(e,t){return Object.assign({},e,{},t)}function N(e){const[t,n]=Object(a.useReducer)(p,{cards:[],initialSessionCards:[]}),{cards:o,card:u,score:m,initialSessionCards:f}=t,v=Object(i.a)();function g(e){const t=N({currentLevel:0,session:N()});if("standard"===v.studyMode.value)t.incorrectIds=[];else{const n=e.map(e=>e.id);t.levels=[n,[],[],[],[]]}return t}function E(e,t=0){const n=e[t];return Object.assign({},n,{index:t,answerRevealed:!1,notes:Object.assign({},n.notes,{visible:!1})})}function N(e={}){return Object.assign({},e,{right:0,wrong:0,total:0})}function y(e,t){e?t.right+=1:t.wrong+=1,t.total=t.right+t.wrong}function k(e){return y(e,m),y(e,m.session),"standard"===v.studyMode.value?function(e,t){return e||t.incorrectIds.push(u.id),t.isLast=t.right===t.total,t}(e,m):function(e,t){let n=t.currentLevel;if(e)n+=1;else{if(!n)return t;n-=1}const a=t.levels[t.currentLevel],r=a.findIndex(e=>e===u.id),[s]=a.splice(r,1);return t.levels[n].push(s),t.isLast=t.levels[4].length===f.length,t}(e,m)}function x(e,t){return e.filter(e=>t.includes(e.id))}function S(e){const t=v.randomize.value?Object(s.b)(e):e;n({score:N(m),card:E(t),cards:t,wasLastCard:!1})}function C(){const e={};if(u.answerRevealed=!0,"multi"===u.back.type)e.score=k(u.back.correct===u.back.selectedOption),delete u.back.selectedOption;else if("exact"===u.back.type){const{answer:n=""}=t;let a=!1;a=u.back.caseSensitive?n===u.back.input:n.toLowerCase()===u.back.input.toLowerCase(),e.score=k(a)}n(Object.assign({card:u},e))}function w(e){const a=u.index+1,r=a===o.length;let s=null,c=m,{currentSession:i}=t;"boolean"==typeof e&&(c=k(e)),r?c.isLast&&(i+=1):s=E(o,a),n({wasLastCard:r,currentSession:i,score:c,card:s})}return Object(a.useEffect)(()=>{Object(c.b)().then(t=>{const{id:a}=e.match.params,r=t.find(e=>e.id===a);r?function({title:e,cards:t}){const a=v.cardCount.value,r=v.randomize.value?Object(s.b)(t):t;let c=r,i=-1;a&&(i=Math.ceil(t.length/a),c=r.slice(0,a));n({currentSession:0,numberOfSessions:i,title:e,initialCards:r,initialSessionCards:c,cards:[...c],card:E(c),score:g(c)})}(r):e.history.replace("/decks")})},[]),o.length?r.a.createElement(a.Fragment,null,r.a.createElement("h1",{className:"component-header study-deck-title"},r.a.createElement("div",{className:"study-progress",style:{transform:`scaleX(${u?u.index/o.length:1})`}}),r.a.createElement("span",null,t.title)),t.wasLastCard?r.a.createElement(d,{score:m,mode:v.studyMode.value,initNextLevel:function(){"standard"===v.studyMode.value?function(){const e=x(o,m.incorrectIds);m.currentLevel+=1,m.incorrectIds.length=0,S(e)}():function(){const{levels:e}=m,t=e.findIndex(e=>e.length),n=x(f,e[t]);m.currentLevel=t,S(n)}()},notLastSession:t.numberOfSessions-t.currentSession>0,initNextSession:function(){const e=v.cardCount.value,n=e*t.currentSession;S(t.initialCards.slice(n,n+e))}}):r.a.createElement(a.Fragment,null,r.a.createElement(l,{score:m,mode:v.studyMode.value}),r.a.createElement(h,{card:u,handleChange:function({target:e}){n({answer:e.value})},selectOption:function({target:e}){u.back.selectedOption=parseInt(e.getAttribute("data-index"),10),n({card:u})},toggleNotes:function(){u.notes.visible=!u.notes.visible,n({card:u})}}),r.a.createElement("div",{className:"container-footer study-footer"},u.answerRevealed?"text"===u.back.type?r.a.createElement(a.Fragment,null,r.a.createElement("button",{className:"btn btn-danger study-footer-btn",onClick:()=>w(!1)},"I Was Wrong"),r.a.createElement("button",{className:"btn btn-success study-footer-btn",onClick:()=>w(!0)},"I Got It Right")):r.a.createElement("button",{className:"btn",onClick:w},"Next"):r.a.createElement(a.Fragment,null,v.timeoutDuration.value>0&&r.a.createElement(b,{duration:v.timeoutDuration.value,callback:C}),r.a.createElement("button",{className:"btn",onClick:C},"Reveal"))))):null}n.d(t,"default",(function(){return N}))}}]);