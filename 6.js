(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{108:function(e,t,a){},109:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);a(32);var n=a(0),c=a.n(n),l=a(6),s=(a(108),a(43)),i=a(47),r=a(8);function o({deckTitle:e,removeDeck:t,cancelRemoval:a}){return c.a.createElement("div",{className:"mask"},c.a.createElement("div",{className:"modal deck-dialog-box"},c.a.createElement("h3",{className:"deck-dialog-box-title"},"Are you sure you want to remove ",c.a.createElement("b",null,e)," deck?"),c.a.createElement("div",{className:"deck-dialog-box-btns"},c.a.createElement("button",{className:"btn btn-danger",onClick:t},"Remove"),c.a.createElement("button",{className:"btn btn-text",onClick:a},"Cancel"))))}a(109);var d=a(65);var m=function({hide:e}){const[t,a]=Object(n.useState)(Object(d.a)());function l({key:t}){"Escape"===t&&e()}return Object(n.useEffect)(()=>(window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}),[]),Object(n.useEffect)(()=>{Object(d.b)(t)},[t]),c.a.createElement("div",{className:"deck-settings-modal-container",onClick:function({target:t,currentTarget:a}){t===a&&e()},onKeyDown:l},c.a.createElement("div",{className:"deck-settings-modal",onChange:function({target:e}){const n=e.getAttribute("data-name"),c=t[n];switch(e.type){case"checkbox":c.value=e.checked;break;case"text":c.value=e.validity.valid&&parseInt(e.value,10)||0}a({...t,[n]:c})}},c.a.createElement("h3",{className:"deck-settings-modal-title"},"Settings"),c.a.createElement("div",{className:"deck-settings-item"},c.a.createElement("label",{className:"checkbox-container"},c.a.createElement("input",{type:"checkbox",className:"sr-only checkbox-input","data-name":"randomize",defaultChecked:t.randomize.value}),c.a.createElement("div",{className:"checkbox deck-settings-checkbox"},c.a.createElement("div",{className:"checkbox-tick"})),c.a.createElement("span",{className:"checkbox-label"},"Randomize cards"))),c.a.createElement("div",{className:"deck-settings-item"},c.a.createElement("label",null,c.a.createElement("span",null,"Use"),c.a.createElement("input",{type:"text",className:"input deck-settings-input","data-name":"cardCount",pattern:"^[0-9]+$",defaultValue:t.cardCount.value}),c.a.createElement("span",null,"cards per study session"),c.a.createElement("div",{className:"deck-settings-message"},"Please provide a valid whole number."))),c.a.createElement("div",{className:"deck-settings-item"},c.a.createElement("label",null,c.a.createElement("span",null,"Reveal answer after"),c.a.createElement("input",{type:"text",className:"input deck-settings-input","data-name":"timeoutDuration",pattern:"^0*|0*([5-9][0-9]*|[1-9]+[0-9]+)$",defaultValue:t.timeoutDuration.value}),c.a.createElement("span",null,"seconds"),c.a.createElement("div",{className:"deck-settings-message"},"Please provide a valid whole number.",c.a.createElement("br",null)," Minimal accepted value is 5 seconds.")))))};function u({deck:e,showDialog:t,editDeck:a,exportDeck:n}){return c.a.createElement("li",{className:"deck"},c.a.createElement(l.b,{to:"/decks/"+e.id,className:"deck-title"},e.title),e.description&&c.a.createElement("p",{className:"deck-description"},e.description),c.a.createElement("div",{className:"deck-card-count"},e.cards.length," card",e.cards.length>1&&"s"),c.a.createElement("div",{className:"deck-btn-container"},c.a.createElement("button",{className:"btn btn-icon deck-btn",onClick:()=>a(e)},c.a.createElement(r.a,{name:"edit"}),c.a.createElement("span",null,"Edit")),c.a.createElement("button",{className:"btn btn-icon deck-btn",onClick:()=>n(e)},c.a.createElement(r.a,{name:"export"}),c.a.createElement("span",null,"Export")),c.a.createElement("button",{className:"btn btn-icon deck-btn",onClick:()=>t(e)},c.a.createElement(r.a,{name:"remove"}),c.a.createElement("span",null,"Remove"))))}t.default=function(e){const[t,d]=Object(n.useState)([]),[b,f]=Object(n.useState)({visible:!1}),[k,p]=Object(n.useState)(!1),[E,v]=Object(n.useState)(!0);function g(t){e.history.push(`/decks/${t.id}/edit`)}function h(e){f({visible:!0,deck:e})}function N(){f({visible:!1,deck:null})}async function y(e){const[{saveAs:t},{default:n}]=await Promise.all([a.e(8).then(a.t.bind(null,139,7)),a.e(2).then(a.t.bind(null,140,7))]),c=new n,l=c.folder(e.title);l.file("description.txt",e.description),e.cards.forEach((e,t)=>{let a=e.front.attachment;a&&(a={...a},l.file(a.file.name,new Blob([a.file],{type:a.file.type})),a.mimeType=a.file.type,a.file=a.file.name),l.file(t+".json",JSON.stringify({...e,front:{...e.front,attachment:a}},null,2))}),t(await c.generateAsync({type:"blob"}),e.title+".zip")}return Object(n.useEffect)(()=>{Object(i.c)().then(e=>{d(e),v(!1)})},[]),c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"decks-header"},c.a.createElement("h1",{className:"decks-title"},"Your Decks"),c.a.createElement(l.b,{to:"/decks/create",className:"btn deck-create-link"},"Create")),c.a.createElement("div",{className:"decks-top-bar"},c.a.createElement("label",{className:"btn btn-icon decks-top-bar-item deck-import-input-container"},c.a.createElement(r.a,{name:"import"}),c.a.createElement("span",null,"Import"),c.a.createElement("input",{type:"file",className:"sr-only",onChange:async function({target:e}){const[n]=e.files,{default:c}=await a.e(2).then(a.t.bind(null,140,7)),l=await c.loadAsync(n),r={id:Object(s.a)(),title:"",description:"",cards:[]};for(const[e,t]of Object.entries(l.files))if(e.endsWith("/")){r.title=e.slice(0,-1);const t=l.files[r.title+"/description.txt"];t&&(r.description=await t.async("string"))}else if(e.endsWith(".json")){const e=JSON.parse(await t.async("string")),a=e.front.attachment;if(e.id=Object(s.a)(),a){const e=a.file,t=l.files[`${r.title}/${e}`];a.file=new File([await t.async("blob")],e,{type:a.mimeType}),delete a.mimeType}r.cards.push(e)}d([...t,r]),Object(i.d)(r),e.value=""}})),c.a.createElement("button",{className:"btn btn-icon decks-top-bar-item",onClick:function(){p(!0)}},c.a.createElement(r.a,{name:"settings"}),c.a.createElement("span",null,"Settings"))),E?"":t.length?c.a.createElement("ul",null,function(e){return e.map(e=>c.a.createElement(u,{key:e.id,deck:e,showDialog:h,editDeck:g,exportDeck:y}))}(t)):c.a.createElement("h2",{className:"deck-list-message"},"You have no decks"),b.visible&&c.a.createElement(o,{deckTitle:b.deck.title,removeDeck:function(){const e=function(e,t){return e.findIndex(({id:e})=>e===t)}(t,b.deck.id);t.splice(e,1),d([...t]),Object(i.a)(b.deck.id),N()},cancelRemoval:N}),k&&c.a.createElement(m,{hide:function(){p(!1)}}))}},43:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return c}));a(32);function n(e){const t=[].concat(e);let a=t.length;for(;a;){const e=Math.floor(Math.random()*a);a-=1,[t[a],t[e]]=[t[e],t[a]]}return t}function c(){return Math.random().toString(32).slice(2,10)}},47:function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return i}));const n=new(a(64).a)("nimus-cards");function c(){return n.decks.toArray().catch(e=>{console.log(e)})}function l(e){return n.decks.get(e)}function s(e){n.decks.put(e).catch(e=>{console.log(e)})}function i(e){n.decks.delete(e).catch(e=>{console.log(e)})}n.version(1).stores({decks:"id"})},65:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return l}));let n=JSON.parse(localStorage.getItem("nimus-cards-settings"))||{randomize:{value:!0},cardCount:{value:""},timeoutDuration:{value:""}};function c(){return n}function l(e){n={...n,...e},localStorage.setItem("nimus-cards-settings",JSON.stringify(n))}}}]);